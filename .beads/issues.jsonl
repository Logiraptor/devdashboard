{"id":"devdeploy-0js","title":"Fix inconsistent indentation in app.go AddRepoMsg/RemoveRepoMsg handlers","description":"In internal/ui/app.go lines ~158-187, the AddRepoMsg and RemoveRepoMsg case handlers have inconsistent indentation. The code compiles and is logically correct, but the mixed tab levels make nesting hard to follow. Run gofmt or manually correct the indentation.","status":"closed","priority":3,"issue_type":"bug","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-07T16:31:41.185135-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-07T17:09:45.068855-05:00","closed_at":"2026-02-07T17:09:45.068855-05:00","close_reason":"Fixed indentation of AddRepoMsg and RemoveRepoMsg handlers to match surrounding switch cases","labels":["project:devdeploy"]}
{"id":"devdeploy-1jt","title":"Improve devdeploy startup speed","description":"# Improve devdeploy startup speed\n\n**Date**: 2026-02-08\n**Status**: proposed\n\n## Context\n\ndevdeploy takes ~2 seconds to show a usable dashboard, which feels sluggish. Profiling the startup path reveals the bottleneck is `loadProjectsCmd` in `Init()`. For each project it:\n\n1. Calls `CountPRs()` — runs `gh pr list` **sequentially per repo** (network call, ~200-400ms each)\n2. Calls `countProjectBeads()` → `ListProjectResources()` → `ListProjectPRs()` — runs `gh pr list` **2 more times per repo** (open + merged), then `bd list` per resource\n\nFor a project with N repos, this is **3N sequential `gh pr list` calls** (GitHub API roundtrips) + N+ `bd list` subprocess invocations. With 1 repo that's ~1-1.5s; with 2 repos, ~2-3s. All calls are sequential and much of the data is fetched redundantly.\n\n## Decision\n\nAttack from three angles:\n\n1. **Deduplicate PR fetching** — `CountPRs` and `ListProjectResources` both call `gh pr list` for the same repos. Fetch once, derive both the count and the resource list from the same data. Eliminates ~1/3 of gh calls.\n\n2. **Parallelize external calls** — Run `gh pr list` and `bd list` concurrently across repos using goroutines. Turns O(N) sequential latency into O(1) wall-clock time.\n\n3. **Progressive dashboard loading** — Show project names + repo counts immediately (filesystem-only, \u003c10ms), then stream in PR counts and bead counts as they arrive via tea.Msg updates.\n\nTarget: dashboard usable in \u003c200ms, full data populated within ~500ms.\n\n## Consequences\n\n- Startup feels instant (names + repo counts from filesystem)\n- PR/bead counts arrive asynchronously — brief \"loading\" state visible\n- Code complexity increases slightly (goroutine coordination) but is well-contained in `loadProjectsCmd` and `ListProjectResources`\n- No new dependencies required","status":"closed","priority":1,"issue_type":"epic","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-08T22:20:56.753649-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-09T11:50:21.45552-05:00","closed_at":"2026-02-09T11:50:21.45552-05:00","close_reason":"Closed","labels":["project:devdeploy"]}
{"id":"devdeploy-1jt.1","title":"Deduplicate PR fetching in loadProjectsCmd","description":"## Problem\n\n`loadProjectsCmd` fetches PRs redundantly for each project:\n- `CountPRs(projectName)` calls `gh pr list` per repo (open only)\n- `countProjectBeads()` calls `ListProjectResources()` → `ListProjectPRs()` which calls `gh pr list` **twice** per repo (open + merged)\n\nFor N repos, that's 3N calls to `gh pr list` when N would suffice.\n\n## Solution\n\n1. Add a `LoadProjectSummary(projectName)` method to `Manager` that fetches PR data once per repo and returns both the count and the resource list.\n2. Replace the separate `CountPRs` + `countProjectBeads` → `ListProjectResources` calls in `loadProjectsCmd` with a single `LoadProjectSummary` call.\n3. The merged PR fetch (for \"recently merged\" display) can be deferred to project detail view since it's not needed on the dashboard.\n\n## Acceptance Criteria\n\n- Each repo's `gh pr list` is called at most once during dashboard load\n- Dashboard still shows correct PR and bead counts\n- No behavior change for project detail view","status":"closed","priority":1,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","estimated_minutes":60,"created_at":"2026-02-08T22:21:06.329152-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-09T10:05:47.885532-05:00","closed_at":"2026-02-09T10:05:47.885532-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-1jt.1","depends_on_id":"devdeploy-1jt","type":"parent-child","created_at":"2026-02-08T22:21:06.330314-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-1jt.2","title":"Parallelize gh and bd subprocess calls during project load","description":"## Problem\n\nAll `gh pr list` and `bd list` calls in `loadProjectsCmd` run sequentially. With 2 repos, that's 6+ sequential network/subprocess calls taking 1.5-3s total wall-clock time.\n\n## Solution\n\n1. In `loadProjectsCmd`, use `sync.WaitGroup` or `errgroup.Group` to run per-repo `gh pr list` calls concurrently.\n2. Similarly, parallelize `bd list` calls across resources in `countProjectBeads`.\n3. Use a result channel or shared slice with mutex to collect results.\n4. Also parallelize across projects if multiple exist (each project's data is independent).\n\n## Acceptance Criteria\n\n- All `gh pr list` calls for different repos run concurrently\n- All `bd list` calls for different resources run concurrently\n- Dashboard load wall-clock time is bounded by the single slowest call, not the sum\n- No race conditions (verify with `go test -race`)","status":"closed","priority":1,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","estimated_minutes":90,"created_at":"2026-02-08T22:21:14.65538-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-09T12:16:48.233249-05:00","closed_at":"2026-02-09T12:16:48.233249-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-1jt.2","depends_on_id":"devdeploy-1jt","type":"parent-child","created_at":"2026-02-08T22:21:14.656577-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-1jt.3","title":"Progressive dashboard loading: show instant data first, stream slow data","description":"## Problem\n\nThe dashboard shows nothing until ALL data (repos, PRs, beads) is fetched. The user stares at a blank screen for 1-2+ seconds.\n\n## Solution\n\nSplit `loadProjectsCmd` into two phases:\n\n### Phase 1: Instant load (\u003c10ms)\n- Read project dirs from filesystem (`ListProjects` + `ListProjectRepos`)\n- Send `ProjectsLoadedMsg` with project names and repo counts only\n- Dashboard renders immediately with \"...\" or spinner for PR/bead counts\n\n### Phase 2: Background enrichment\n- Fire a separate `tea.Cmd` that fetches PR counts and bead counts (using the parallelized approach from the sibling task)\n- Send a new `ProjectsEnrichedMsg` with the full data\n- Dashboard updates in-place when enriched data arrives\n\n### UI treatment\n- Show repo count immediately (it's from filesystem)\n- Show PR count and bead count as \"–\" or a subtle loading indicator until Phase 2 completes\n- Animate or fade in the numbers when they arrive\n\n## Acceptance Criteria\n\n- Dashboard renders with project names + repo counts in \u003c100ms\n- PR and bead counts appear asynchronously without blocking initial render\n- No layout shift when counts arrive (reserve space)\n- User can navigate (j/k, enter) immediately, even before counts load","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","estimated_minutes":90,"created_at":"2026-02-08T22:21:26.044136-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-09T12:16:48.332154-05:00","closed_at":"2026-02-09T12:16:48.332154-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-1jt.3","depends_on_id":"devdeploy-1jt","type":"parent-child","created_at":"2026-02-08T22:21:26.045014-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-1jt.4","title":"Skip merged PR fetch on dashboard, defer to project detail","description":"## Problem\n\n`countProjectBeads` calls `ListProjectResources` which calls `ListProjectPRs`, and that fetches both open AND merged PRs (2 gh calls per repo). Merged PRs are only relevant in the project detail view, not on the dashboard summary.\n\n## Solution\n\n1. Create a `ListProjectResourcesLight(projectName)` that only fetches open PRs (not merged), cutting gh calls in half for the dashboard.\n2. Keep `ListProjectResources` (with merged PRs) for the detail view where merged PRs are actually displayed.\n3. Use the light version in `loadProjectsCmd` / `countProjectBeads`.\n\n## Acceptance Criteria\n\n- Dashboard load does not call `gh pr list --state merged`\n- Project detail view still shows merged PRs\n- Bead counts on dashboard only reflect open PR resources (merged PRs rarely have active beads)","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","estimated_minutes":30,"created_at":"2026-02-08T22:21:34.176503-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-09T11:59:05.057423-05:00","closed_at":"2026-02-09T11:59:05.057423-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-1jt.4","depends_on_id":"devdeploy-1jt","type":"parent-child","created_at":"2026-02-08T22:21:34.177535-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-1sy","title":"Remove zero-value TestStatus_Constants test","description":"TestStatus_Constants in internal/progress/event_test.go asserts that const StatusRunning == \"running\", StatusDone == \"done\", etc. This tests that constants equal their own definitions — zero value added, pure noise. Remove it.","status":"closed","priority":4,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-07T16:31:44.350047-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-07T19:59:30.427923-05:00","closed_at":"2026-02-07T19:59:30.427923-05:00","close_reason":"Closed","labels":["project:devdeploy"]}
{"id":"devdeploy-3yn","title":"SPC s r on selected bead: targeted Ralph prompt","description":"When a bead is selected in the project detail view, SPC s r should launch Ralph with a targeted prompt telling the agent to work on that specific bead (by ID) instead of running bd ready to pick one. Requires extending the project detail cursor to navigate beads, and modifying the Ralph launch logic to detect bead selection.","status":"closed","priority":1,"issue_type":"epic","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-09T09:42:55.313741-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-09T09:48:58.181815-05:00","closed_at":"2026-02-09T09:48:58.181815-05:00","close_reason":"Closed","labels":["project:devdeploy"]}
{"id":"devdeploy-3yn.1","title":"Extend project detail cursor to navigate beads","description":"Currently ProjectDetailView.Selected indexes into Resources (repos/PRs). Beads are rendered under each resource but are not selectable. Introduce a two-level cursor: the existing resource index plus an optional bead index within the selected resource. j/k should move through beads within a resource before advancing to the next resource. SelectedBead() should return the bead under the cursor (or nil if cursor is on the resource header).","status":"closed","priority":1,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","estimated_minutes":90,"created_at":"2026-02-09T09:43:03.753465-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-09T09:48:30.080127-05:00","closed_at":"2026-02-09T09:48:30.080127-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-3yn.1","depends_on_id":"devdeploy-3yn","type":"parent-child","created_at":"2026-02-09T09:43:03.754333-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-3yn.2","title":"Update project detail view rendering for bead selection highlight","description":"When the cursor is on a bead (SelectedBead() != nil), visually highlight that bead row with the same selected style treatment (▸ bullet, bold color). Resource header should use a dimmer selection style when cursor is on one of its child beads vs. on the header itself.","status":"closed","priority":1,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","estimated_minutes":45,"created_at":"2026-02-09T09:43:12.634548-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-09T09:48:30.181853-05:00","closed_at":"2026-02-09T09:48:30.181853-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-3yn.2","depends_on_id":"devdeploy-3yn","type":"parent-child","created_at":"2026-02-09T09:43:12.635664-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-3yn.2","depends_on_id":"devdeploy-3yn.1","type":"blocks","created_at":"2026-02-09T09:43:12.636733-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-3yn.3","title":"Modify LaunchRalphMsg to use targeted prompt when bead is selected","description":"When SPC s r is pressed and the cursor is on a bead (SelectedBead() != nil), build a targeted prompt that tells the agent to work on that specific bead ID (e.g. 'Run bd show \u003cid\u003e, implement the issue, then close it with bd close \u003cid\u003e'). When cursor is on a resource header (no bead selected), keep the existing bd ready behavior. LaunchRalphMsg may need a TargetBeadID field, or the handler reads it from Detail.SelectedBead().","status":"closed","priority":1,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","estimated_minutes":30,"created_at":"2026-02-09T09:43:20.068186-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-09T09:48:30.28329-05:00","closed_at":"2026-02-09T09:48:30.28329-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-3yn.3","depends_on_id":"devdeploy-3yn","type":"parent-child","created_at":"2026-02-09T09:43:20.069302-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-3yn.3","depends_on_id":"devdeploy-3yn.1","type":"blocks","created_at":"2026-02-09T09:43:20.070443-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-3yn.4","title":"Tests for bead-level cursor navigation and targeted Ralph launch","description":"Add tests covering: (1) j/k navigation through beads within a resource, (2) SelectedBead() returns correct bead or nil, (3) LaunchRalphMsg with bead selected uses targeted prompt containing the bead ID, (4) LaunchRalphMsg without bead selected still uses the generic bd ready prompt. Update existing TestLaunchRalphMsg tests as needed.","status":"closed","priority":1,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","estimated_minutes":60,"created_at":"2026-02-09T09:43:26.358642-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-09T09:48:30.386748-05:00","closed_at":"2026-02-09T09:48:30.386748-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-3yn.4","depends_on_id":"devdeploy-3yn","type":"parent-child","created_at":"2026-02-09T09:43:26.359539-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-3yn.4","depends_on_id":"devdeploy-3yn.1","type":"blocks","created_at":"2026-02-09T09:43:26.360756-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-3yn.4","depends_on_id":"devdeploy-3yn.3","type":"blocks","created_at":"2026-02-09T09:43:26.361644-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-3yn.5","title":"Update keybinds.md and agent-workflow.md for targeted Ralph behavior","description":"Document the new SPC s r behavior: when cursor is on a bead, launches Ralph targeting that specific bead; when on a resource header, uses the existing bd ready generic prompt. Update the SPC s table in keybinds.md and the Ralph section in agent-workflow.md.","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","estimated_minutes":15,"created_at":"2026-02-09T09:43:32.12584-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-09T09:48:58.07819-05:00","closed_at":"2026-02-09T09:48:58.07819-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-3yn.5","depends_on_id":"devdeploy-3yn","type":"parent-child","created_at":"2026-02-09T09:43:32.126728-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-3yn.5","depends_on_id":"devdeploy-3yn.3","type":"blocks","created_at":"2026-02-09T09:43:32.127953-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-4vu","title":"Fix or remove failing TestSplitPane_InvalidDir","description":"TestSplitPane_InvalidDir in internal/tmux/tmux_test.go fails when run inside tmux. It expects SplitPane to error on a nonexistent directory, but tmux split-window -c silently accepts bad paths. Either adjust the assertion to match actual tmux behavior, or remove the test.","status":"closed","priority":2,"issue_type":"bug","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-07T16:31:31.1231-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-07T17:09:44.94472-05:00","closed_at":"2026-02-07T17:09:44.94472-05:00","close_reason":"Added os.Stat validation in SplitPane before calling tmux, so nonexistent dirs are caught early","labels":["project:devdeploy"]}
{"id":"devdeploy-7uj","title":"Resource-based project workflow","description":"# Resource-based Project Workflow\n\n**Date**: 2026-02-07\n**Status**: accepted\n\n## Overview\n\nRefine devdeploy into a glue tool for git worktrees, agent sessions, GitHub PRs, and tmux panes. Projects contain **resources** (repos from ~/workspace, open PRs). Two primary actions on any resource: **open shell** or **launch agent** (shell running `agent`). devdeploy manages the lifecycle of worktrees, tmux panes, and sessions — everything persists until explicitly cleaned up.\n\n## Core Model\n\n```\nResource (repo or PR)\n  → Worktree (created on first action, reused after)\n    → Panes (shells, agents — persist until killed)\n```\n\n### Resource Types\n\n| Type | Source | Worktree behavior |\n|------|--------|-------------------|\n| Repo | Any repo in ~/workspace | New worktree on first action (branch: devdeploy/\u003cproject\u003e-\u003crand\u003e) |\n| PR | Open PR on a project repo (via gh pr list) | Worktree with PR branch checked out; reuse if exists |\n\n### Actions\n\n| Action | Keybind | Behavior |\n|--------|---------|----------|\n| Open shell | Enter / SPC s s | Create worktree if needed, split tmux pane in worktree dir |\n| Launch agent | SPC s a | Create worktree if needed, split tmux pane running `agent` in worktree |\n\n### Session Tracking\n\n- Track multiple pane IDs per resource (not just one global agentPaneID)\n- Check pane liveness via `tmux list-panes`\n- Panes persist across project switches\n- UI shows which resources have active shells/agents\n\n### Cleanup\n\n- Remove resource: kill associated panes, optionally remove worktree\n- Project delete cleans up all resources, panes, worktrees\n\n## What Carries Forward\n\n- Project CRUD, dashboard, keybind system (SPC leader)\n- internal/tmux package (split-window, kill-pane, break-pane, join-pane)\n- gh pr list integration (devdeploy-8ni.1)\n- SPC s s / SPC s h / SPC s j keybinds\n- Tmux layout: devdeploy left, project panes right (devdeploy-8ni.5)\n\n## What Changes\n\n- ProjectDetailView becomes resource-centric with j/k selection\n- Single agentPaneID → session tracker (many panes per resource)\n- Worktrees created lazily on first action, not on repo add\n- PRs are first-class resources that create worktrees\n- \"Agent\" = shell + `agent` command, not a separate concept\n\n## Supersedes\n\ndevdeploy-8ni (remaining open tasks). Completed work from that epic (gh pr list, SPC rename, tmux layout) carries forward.","status":"closed","priority":2,"issue_type":"epic","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-07T16:04:32.003457-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-07T20:54:29.910582-05:00","closed_at":"2026-02-07T20:54:29.910582-05:00","close_reason":"Closed","labels":["project:devdeploy"]}
{"id":"devdeploy-7uj.1","title":"Resource model: define Resource type, replace static repo/PR lists","description":"Define a Resource type that unifies repos and PRs:\n\n```go\ntype ResourceKind string\nconst (\n    ResourceRepo ResourceKind = \"repo\"\n    ResourcePR   ResourceKind = \"pr\"\n)\n\ntype Resource struct {\n    Kind         ResourceKind\n    RepoName     string      // repo in ~/workspace\n    PR           *PRInfo     // non-nil for PR resources\n    WorktreePath string      // may be empty until first action\n    Panes        []PaneInfo  // active tmux panes (from session tracker)\n}\n```\n\n- Add Resource to project package\n- ProjectDetailView receives []Resource instead of separate Repos + PRsByRepo\n- Resources built from: ListProjectRepos (repo resources) + ListProjectPRs (PR resources)\n- Worktree path populated when worktree exists, empty otherwise\n- No behavior changes yet — just the data model","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-07T16:04:41.992086-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-07T16:12:47.567375-05:00","closed_at":"2026-02-07T16:12:47.567375-05:00","close_reason":"Implemented Resource model. Decisions: (1) Added stub PaneInfo now (ID + IsAgent), to be fleshed out in 7uj.3. (2) Added HeadRefName to PRInfo to avoid schema change in 7uj.6. (3) View renders tree: repos as group headers, PRs indented underneath.","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-7uj.1","depends_on_id":"devdeploy-7uj","type":"parent-child","created_at":"2026-02-07T16:04:41.993073-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-7uj.10","title":"Exclude PR worktree dirs from ListProjectRepos and populate PR WorktreePath in ListProjectResources","description":"## Problem\nListProjectRepos scans all subdirs with .git in the project dir. PR worktree dirs\n(e.g. my-repo-pr-42) match that scan and appear as separate repo resources in the\nresource list — confusing because the worktree belongs to the PR, not a new repo.\n\nAdditionally, ListProjectResources doesn't set WorktreePath on PR resources even\nwhen their worktree already exists on disk. This means re-entering the project view\nloses the association between PR and its worktree.\n\n## Fix\nTwo changes in project.go:\n\n1. **ListProjectRepos**: skip directories matching the PR worktree naming convention\n   (\u003crepoName\u003e-pr-\u003cnumber\u003e). These are managed by EnsurePRWorktree and should not\n   appear as independent repos.\n\n2. **ListProjectResources**: after building PR resources, check if the worktree path\n   (\u003cprojectDir\u003e/\u003crepoName\u003e-pr-\u003cnumber\u003e) exists on disk. If so, set WorktreePath on\n   the PR resource. This restores the association on re-entry without needing to\n   call EnsurePRWorktree again.\n\nOptional UI enhancement: show a note on PR resources that have a worktree, e.g.\n\"(worktree)\" or the branch name, to make it clear the PR has a local checkout.","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-07T20:25:35.79345-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-07T20:27:16.049072-05:00","closed_at":"2026-02-07T20:27:16.049072-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-7uj.10","depends_on_id":"devdeploy-7uj","type":"parent-child","created_at":"2026-02-07T20:25:35.794094-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-7uj.2","title":"Selectable resource list in project detail (j/k nav)","description":"Make resources selectable in ProjectDetailView:\n\n- Flat list of resources (repos first, then PRs grouped by repo)\n- j/k moves selection cursor\n- Visual highlight on selected resource\n- Status indicators: has worktree (●), active panes (shell count, agent count)\n- Enter triggers action on selected resource (wired in task 4)\n\nUI sketch:\n```\n← my-project\n\nRepos:\n  ▸ devdeploy          ● 2 shells\n    grafana\n\nPRs (devdeploy):\n    #42 Add dark mode   ● 1 agent\n    #41 Fix bug\n```\n\nDepends on: task 1 (resource model)","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-07T16:04:45.349492-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-07T16:19:32.635532-05:00","closed_at":"2026-02-07T16:19:32.635532-05:00","close_reason":"Implemented selectable resource list: j/k/g/G nav, ▸ selection cursor, status indicators (● worktree, shell/agent counts). SelectedResource() accessor for wiring Enter in task 4.","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-7uj.2","depends_on_id":"devdeploy-7uj","type":"parent-child","created_at":"2026-02-07T16:04:45.350136-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-7uj.2","depends_on_id":"devdeploy-7uj.1","type":"blocks","created_at":"2026-02-07T16:05:30.282956-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-7uj.3","title":"Session tracker: track multiple panes per resource","description":"Replace the single agentPaneID with a session tracker that maps resources to live tmux panes:\n\n- SessionTracker type in internal/tmux or new internal/session package\n- Track pane ID, type (shell/agent), resource key, creation time\n- Register pane when created (open shell / launch agent)\n- Unregister pane when killed or detected dead\n- Liveness check: use `tmux list-panes -F '#{pane_id}'` to detect dead panes\n- Query: list panes for a resource, count active shells/agents\n- Persist across project switches (tracker lives on AppModel, not per-view)\n\nDepends on: task 1 (resource model)","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-07T16:04:49.883678-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-07T16:23:51.757242-05:00","closed_at":"2026-02-07T16:23:51.757242-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-7uj.3","depends_on_id":"devdeploy-7uj","type":"parent-child","created_at":"2026-02-07T16:04:49.885046-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-7uj.3","depends_on_id":"devdeploy-7uj.1","type":"blocks","created_at":"2026-02-07T16:05:30.86016-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-7uj.4","title":"Open shell action on selected resource","description":"Wire Enter / SPC s s to open a shell on the selected resource:\n\n- On Enter (or SPC s s): get selected resource from ProjectDetailView\n- If resource has no worktree: create one\n  - Repo resource: git worktree add (reuse existing AddRepo logic)\n  - PR resource: handled in task 6\n- Split tmux pane in worktree dir (tmux.SplitPane)\n- Register pane with session tracker (type: shell)\n- Update SPC s h / SPC s j to work with the most recent pane (or selected resource's pane)\n\nDepends on: task 2 (selectable list), task 3 (session tracker)","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-07T16:04:54.38939-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-07T17:03:50.671003-05:00","closed_at":"2026-02-07T17:03:50.671003-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-7uj.4","depends_on_id":"devdeploy-7uj","type":"parent-child","created_at":"2026-02-07T16:04:54.389991-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-7uj.4","depends_on_id":"devdeploy-7uj.2","type":"blocks","created_at":"2026-02-07T16:05:31.510138-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-7uj.4","depends_on_id":"devdeploy-7uj.3","type":"blocks","created_at":"2026-02-07T16:05:32.172107-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-7uj.5","title":"Launch agent action on selected resource (SPC s a)","description":"Add SPC s a to launch an agent on the selected resource:\n\n- New keybind: SPC s a = \"Launch agent\"\n- Same worktree creation logic as open shell (task 4)\n- Split tmux pane in worktree dir\n- Send `agent` command to the new pane via tmux.SendKeys\n- Register pane with session tracker (type: agent)\n- Update keybind hints to show SPC s a in project detail mode\n\nDepends on: task 4 (open shell action)","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-07T16:04:56.762124-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-07T17:14:23.246428-05:00","closed_at":"2026-02-07T17:14:23.246428-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-7uj.5","depends_on_id":"devdeploy-7uj","type":"parent-child","created_at":"2026-02-07T16:04:56.76274-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-7uj.5","depends_on_id":"devdeploy-7uj.4","type":"blocks","created_at":"2026-02-07T16:05:32.703663-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-7uj.6","title":"PR-to-worktree flow: create worktree with PR branch","description":"When a PR resource is acted on, create a worktree with the PR's branch:\n\n- Query PR branch: `gh pr view \u003cnumber\u003e --json headRefName -q .headRefName` (run in repo worktree or source repo)\n- Check if a worktree already exists for that branch (scan existing worktrees)\n- If exists: reuse it (set resource's WorktreePath)\n- If not: `git worktree add \u003cpath\u003e \u003cbranch\u003e` from the source repo in ~/workspace\n  - Worktree path: project dir / repo-name-pr-\u003cnumber\u003e (or similar)\n  - If branch doesn't exist locally: `git fetch origin \u003cbranch\u003e` first\n- Works for both open shell and launch agent actions\n\nDepends on: task 4 (open shell action)","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-07T16:05:01.833915-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-07T20:10:18.556404-05:00","closed_at":"2026-02-07T20:10:18.556404-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-7uj.6","depends_on_id":"devdeploy-7uj","type":"parent-child","created_at":"2026-02-07T16:05:01.834556-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-7uj.6","depends_on_id":"devdeploy-7uj.4","type":"blocks","created_at":"2026-02-07T16:05:33.218641-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-7uj.7","title":"Resource cleanup: remove resources, kill panes, delete worktrees","description":"Add cleanup operations for resources:\n\n- Keybind: SPC p x or 'd' on selected resource = remove resource\n- Kill all associated tmux panes (from session tracker)\n- Optionally remove worktree (`git worktree remove`)\n- Confirmation prompt for destructive operations\n- Update project delete to clean up all resources first\n- Handle edge cases: pane already dead, worktree already removed\n\nDepends on: task 3 (session tracker)","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-07T16:05:05.996848-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-07T20:41:33.175542-05:00","closed_at":"2026-02-07T20:41:33.175542-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-7uj.7","depends_on_id":"devdeploy-7uj","type":"parent-child","created_at":"2026-02-07T16:05:05.99787-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-7uj.7","depends_on_id":"devdeploy-7uj.3","type":"blocks","created_at":"2026-02-07T16:05:33.850962-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-7uj.8","title":"Validation: end-to-end resource workflow","description":"Validate the full resource workflow end-to-end:\n\n1. Create project\n2. Add repo from ~/workspace → shows as resource (no worktree yet)\n3. Select repo, Enter → worktree created, shell opens in tmux pane\n4. Switch to dashboard, come back → pane still alive, shown in UI\n5. Select PR, Enter → worktree with PR branch, shell opens\n6. SPC s a on resource → agent launches in worktree\n7. Remove resource → panes killed, worktree cleaned up\n8. Delete project → everything cleaned up\n\nTests:\n- Unit tests for Resource model, session tracker\n- Integration tests for worktree creation/reuse\n- Manual validation of tmux pane lifecycle\n\nDepends on: all other tasks","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-07T16:05:09.197017-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-07T20:54:22.304127-05:00","closed_at":"2026-02-07T20:54:22.304127-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-7uj.8","depends_on_id":"devdeploy-7uj","type":"parent-child","created_at":"2026-02-07T16:05:09.197648-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-7uj.8","depends_on_id":"devdeploy-7uj.5","type":"blocks","created_at":"2026-02-07T16:05:35.116264-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-7uj.8","depends_on_id":"devdeploy-7uj.6","type":"blocks","created_at":"2026-02-07T16:05:35.230978-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-7uj.8","depends_on_id":"devdeploy-7uj.7","type":"blocks","created_at":"2026-02-07T16:05:35.346837-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-7uj.9","title":"Prune dead panes from session tracker on view entry and before rendering pane counts","description":"## Problem\nWhen a shell pane is closed (ctrl+d), the session tracker still counts it as alive.\nThe UI shows \"● 3 shells\" even though all panes are dead. The Prune() method exists\non session.Tracker and uses tmux list-panes for liveness, but nothing calls it.\n\n## Fix\nCall Sessions.Prune() at two key moments:\n1. When entering project detail view (newProjectDetailView) — before populating pane info\n2. On a periodic tick or before each View() render that shows pane counts\n\nOption 1 (simplest): prune in newProjectDetailView and in refreshDetailPanes.\nThis covers re-entry and post-action. Panes still show stale counts *while viewing*\nuntil the next action or navigation, but that's acceptable.\n\nOption 2 (better UX): add a tea.Tick that prunes every 2-5 seconds. This catches\npanes dying while the user is looking at the detail view. Slightly more complex.\n\nStart with option 1; option 2 can be a follow-up if needed.","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-07T20:25:34.355473-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-07T20:27:15.932611-05:00","closed_at":"2026-02-07T20:27:15.932611-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-7uj.9","depends_on_id":"devdeploy-7uj","type":"parent-child","created_at":"2026-02-07T20:25:34.35856-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-7w5","title":"Sort resource view so epics and their children appear together in order","description":"In the resource view, beads should be sorted so that epics and their children appear grouped together and in hierarchical order, rather than as a flat unsorted list.","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-09T09:51:49.225776-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-09T10:13:14.855944-05:00","closed_at":"2026-02-09T10:13:14.855944-05:00","close_reason":"Closed","labels":["project:devdeploy"]}
{"id":"devdeploy-7zd","title":"Make UI full screen","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-06T10:37:56.808171-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-06T15:44:13.835093-05:00","closed_at":"2026-02-06T15:44:13.835093-05:00","close_reason":"Added tea.WithAltScreen() to use alternate screen buffer for full-screen TUI","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-7zd","depends_on_id":"devdeploy-i1u","type":"blocks","created_at":"2026-02-06T10:37:58.201891-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-7zd","depends_on_id":"devdeploy-i1u","type":"parent-child","created_at":"2026-02-06T10:38:05.332912-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-7zd","depends_on_id":"devdeploy-i1u.2","type":"blocks","created_at":"2026-02-06T14:02:27.963194-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-8ni","title":"Real PRs, selection, SPC s s keybind, tmux organization","description":"# DevDeploy: Real PRs, Selection, Keybind Fix, and Tmux Organization\n\n**Date**: 2026-02-06\n**Status**: accepted\n\n## Overview\n\nNext phase of devdeploy development: replace fake PR data with real API integration, add selection and shell actions for repos/PRs, fix the shell keybind (SPC a a → SPC s s), and implement automatic tmux organization with devdeploy as a persistent control panel.\n\n---\n\n## 1. Real PR Lists in Projects\n\n**Current state**: `ProjectDetailView` hardcodes `PRs: []string{\"#42 in review\", \"#41 merged\", \"#38 open\"}`. `project.Manager.CountPRs` returns 0 with a TODO for gh integration. `newProjectDetailView` never populates PRs from any real source.\n\n**Goal**: Integrate with `gh pr list` per repo in the project. Populate both the project detail view and the dashboard PR count.\n\n**Decisions**:\n- **gh only** — No GitLab or other providers\n- **Open + recently merged** — Show both open and recently merged PRs\n- **Group by repo** — PRs displayed grouped by repo in the UI\n- **Wire CountPRs** — Dashboard PR count uses real `gh pr list` numbers\n\n---\n\n## 2. Selection and Shell Actions in Projects\n\n**Current state**: Project detail shows repos and PRs as static lists. No selection (j/k), no actions. `SPC s s` (currently SPC a a) opens a shell in the project directory only.\n\n**Goal**:\n- Make repos and PRs selectable (j/k navigation, highlight selected)\n- **Enter on selected item** opens shell: repo = shell in worktree current state; PR = `gh pr checkout \u003cn\u003e` in that repo's worktree, then open shell there\n\n**Decisions**:\n- **Repos separate from PRs** — Two selectable sections: Repos, PRs (grouped by repo)\n- **Enter = open shell** — Enter on repo → shell in worktree; Enter on PR → checkout PR branch, then shell\n- **Checkout then open** — For PR: run `gh pr checkout` in the worktree, then split pane with that cwd\n\n---\n\n## 3. Keybind: SPC a a → SPC s s\n\n**Current state**: `SPC a a` = \"Agent run\" (opens tmux pane with shell). Descriptions say \"Agent run\".\n\n**Goal**: Rename to `SPC s s` because it opens a shell. Update hints to say \"Open shell\" or \"Shell\" instead of \"Agent run\".\n\n**Submenu structure**:\n- `SPC s` = Shell submenu\n- `SPC s s` = Open shell (primary action; project dir when nothing selected)\n- `SPC s h` = Hide shell pane (was SPC a h)\n- `SPC s j` or `SPC s a` = Show/join shell pane (was SPC a s)\n\n**Files to update**: `app.go` (bindings), `keybind.go` (firstLevelSubmenuLabel), `keybinds.md`, `agent-workflow.md`, tests.\n\n---\n\n## 4. Tmux Organization: Project Sections, DevDeploy Control Panel\n\n**Current state**: devdeploy runs in one pane. `SPC s s` creates a new pane via `tmux split-window -c \u003cprojectDir\u003e`. No project-specific layout. Panes are ad-hoc.\n\n**Goal**:\n- **DevDeploy always visible on the left** as a control panel\n- **Each project gets a separate section** in tmux\n- **Selecting a project** switches the right side to that project's space\n- **Panes created in the project** end up in that project's area\n\n**Decisions**:\n- **Layout: Option C** — Single window, two-pane layout: left = devdeploy, right = current project. Right side is one window per project; `select-window` switches. New shells go to current project's window.\n- **Persistent shells** — When switching projects, break current project's panes to background; restore (join-pane) when switching back\n- **Init on startup** — devdeploy creates the layout on startup if it doesn't exist\n\n---\n\n## In Scope (from Ideas)\n\n1. **Quick project switch**: `SPC p l` — Switch project window without going through dashboard\n2. **Persistent shells**: Break to background on project switch, join on return (see §4)\n3. **Wire PR numbers**: `CountPRs` uses real `gh pr list` (see §1)\n4. **Window/pane naming**: Name tmux windows by project; pane titles show repo or PR\n","status":"closed","priority":2,"issue_type":"epic","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-06T16:15:40.416074-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-07T16:04:13.250941-05:00","closed_at":"2026-02-07T16:04:13.250941-05:00","close_reason":"All subtasks complete or superseded. Completed: gh pr list integration, SPC s s keybind, tmux layout. Remaining work superseded by new resource-based project workflow epic.","labels":["project:devdeploy"]}
{"id":"devdeploy-8ni.1","title":"Integrate gh pr list for real PR data in projects","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-06T16:15:43.076666-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-06T16:26:33.832272-05:00","closed_at":"2026-02-06T16:26:33.832272-05:00","close_reason":"Integrated gh pr list for CountPRs and ListProjectPRs; wired real PR data into ProjectDetailView","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-8ni.1","depends_on_id":"devdeploy-8ni","type":"parent-child","created_at":"2026-02-06T16:15:43.077721-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-8ni.2","title":"Add selectable repos and PRs in project detail (j/k nav)","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-06T16:15:43.20605-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-07T16:04:03.279252-05:00","closed_at":"2026-02-07T16:04:03.279252-05:00","close_reason":"Superseded by new resource-based project workflow epic","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-8ni.2","depends_on_id":"devdeploy-8ni","type":"parent-child","created_at":"2026-02-06T16:15:43.207408-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-8ni.2","depends_on_id":"devdeploy-8ni.1","type":"blocks","created_at":"2026-02-06T16:15:45.883832-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-8ni.3","title":"Open shell in repo worktree and with PR checked out","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-06T16:15:43.329948-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-07T16:04:03.968691-05:00","closed_at":"2026-02-07T16:04:03.968691-05:00","close_reason":"Superseded by new resource-based project workflow epic","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-8ni.3","depends_on_id":"devdeploy-8ni","type":"parent-child","created_at":"2026-02-06T16:15:43.331591-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-8ni.3","depends_on_id":"devdeploy-8ni.2","type":"blocks","created_at":"2026-02-06T16:15:46.012172-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-8ni.4","title":"Rename SPC a a to SPC s s (Open shell) and update hints","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-06T16:15:43.437358-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-06T16:20:41.783243-05:00","closed_at":"2026-02-06T16:20:41.783243-05:00","close_reason":"Renamed SPC a a to SPC s s (Open shell), SPC a h to SPC s h, SPC a s to SPC s j. Updated firstLevelSubmenuLabel, keybinds.md, agent-workflow.md.","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-8ni.4","depends_on_id":"devdeploy-8ni","type":"parent-child","created_at":"2026-02-06T16:15:43.438112-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-8ni.5","title":"Tmux layout: devdeploy control panel left, project panes right","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-06T16:15:43.555308-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-06T16:25:11.623178-05:00","closed_at":"2026-02-06T16:25:11.623178-05:00","close_reason":"Added tmux.EnsureLayout() and WindowPaneCount(); main calls EnsureLayout on startup to create two-pane layout (devdeploy left, project area right) when window has only one pane. Tests and agent-workflow.md updated.","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-8ni.5","depends_on_id":"devdeploy-8ni","type":"parent-child","created_at":"2026-02-06T16:15:43.556479-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-8ni.6","title":"Project switch updates right-side tmux panes","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-06T16:15:43.666234-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-07T16:04:04.510477-05:00","closed_at":"2026-02-07T16:04:04.510477-05:00","close_reason":"Superseded by new resource-based project workflow epic","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-8ni.6","depends_on_id":"devdeploy-8ni","type":"parent-child","created_at":"2026-02-06T16:15:43.667095-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-8ni.6","depends_on_id":"devdeploy-8ni.5","type":"blocks","created_at":"2026-02-06T16:15:46.127404-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-8ni.7","title":"Validate: real PRs, selection, SPC s s, tmux layout work end-to-end","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-06T16:15:48.263265-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-07T16:04:09.14079-05:00","closed_at":"2026-02-07T16:04:09.14079-05:00","close_reason":"Superseded by new resource-based project workflow epic","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-8ni.7","depends_on_id":"devdeploy-8ni","type":"parent-child","created_at":"2026-02-06T16:15:48.264581-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-8ni.7","depends_on_id":"devdeploy-8ni.3","type":"blocks","created_at":"2026-02-06T16:15:50.124301-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-8ni.7","depends_on_id":"devdeploy-8ni.4","type":"blocks","created_at":"2026-02-06T16:15:50.25753-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-8ni.7","depends_on_id":"devdeploy-8ni.6","type":"blocks","created_at":"2026-02-06T16:15:50.389107-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-8ni.7","depends_on_id":"devdeploy-8ni.8","type":"blocks","created_at":"2026-02-06T16:19:12.63336-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-8ni.8","title":"SPC p l: Quick project switch without dashboard","description":"Add SPC p l keybind to switch project window directly. Depends on tmux layout (8ni.5/8ni.6).","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-06T16:19:10.899991-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-07T16:04:05.637679-05:00","closed_at":"2026-02-07T16:04:05.637679-05:00","close_reason":"Superseded by new resource-based project workflow epic","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-8ni.8","depends_on_id":"devdeploy-8ni","type":"parent-child","created_at":"2026-02-06T16:19:10.902111-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-8ni.8","depends_on_id":"devdeploy-8ni.6","type":"blocks","created_at":"2026-02-06T16:19:12.524674-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-a46","title":"Resource view bead list should be scrollable to show all items","description":"The bead list in the resource view is currently truncated, preventing users from seeing all beads. The list should be scrollable so all items are accessible.","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-09T09:54:50.934648-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-09T10:01:48.152816-05:00","closed_at":"2026-02-09T10:01:48.152816-05:00","close_reason":"Closed","labels":["project:devdeploy"]}
{"id":"devdeploy-awh","title":"Embedded shell for interactive agent with non-SPC escape chord","description":"# Embedded Shell for Interactive Agent\n\n## Context\n\nThe current agent interaction is \"wack\" — it shows a progress overlay with fake/stub events. In reality, the agent needs to spawn an **embedded shell** so that an interactive agent (Cursor, Claude Code, etc.) can run and be **fully interacted with** in real time.\n\nAdditionally, there must be a **key chord to exit** from the agent/shell view. This chord must **NOT use SPC as the leader**, since space is typed naturally all the time and would constantly trigger accidental exits.\n\n## Goals\n\n1. **Embedded PTY/shell** — Spawn a real interactive shell (or agent process) in a PTY so the user can type, run commands, and interact with Cursor/Claude directly\n2. **Non-SPC escape chord** — Implement a dedicated key chord (e.g. Ctrl+E, Alt+E, or similar) to return from agent mode to the main app\n3. **Integration** — Wire into existing agent flow (RunAgentMsg, AgentRunner, project context)\n\n## Technical Notes\n\n- Bubble Tea / Lipgloss: need PTY handling for raw terminal input passthrough\n- Consider `github.com/creack/pty` or similar for PTY\n- Escape chord should be rare enough to avoid conflicts with natural typing\n\n## Factoring\n\nPTY implementation must be **well-factored to allow swapping libraries later**:\n\n- **Interface** — e.g. `PTYRunner` with `Start(ctx, cmd, size) (io.ReadWriteCloser, error)` and `Resize(size)` so the UI only depends on the contract\n- **Implementation** — a `creackPTY` (or similar) struct that implements the interface and wraps `creack/pty`\n- **Dependency injection** — pass the PTY implementation into the shell view or agent runner so it can be swapped without changing the UI code\n","status":"closed","priority":2,"issue_type":"epic","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-06T14:37:41.010926-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-06T15:19:27.09679-05:00","closed_at":"2026-02-06T15:19:27.09679-05:00","close_reason":"Replaced by tmux pane orchestration (devdeploy-bgt). Use devdeploy-bgt for agent shell work.","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-awh","depends_on_id":"devdeploy-bgt","type":"relates-to","created_at":"2026-02-06T15:19:27.606934-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-awh.1","title":"Embedded PTY/shell for agent interaction","description":"Spawn a real interactive shell (or agent process) in a PTY so the user can type, run commands, and interact with Cursor/Claude directly. Replace the current progress overlay with a PTY-backed view that passes through stdin/stdout.","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-06T14:37:42.978019-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-06T15:13:00.181538-05:00","closed_at":"2026-02-06T15:13:00.181538-05:00","close_reason":"PTY interface + CreackPTY impl, ShellView with stdin/stdout passthrough, wired into RunAgentMsg","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-awh.1","depends_on_id":"devdeploy-awh","type":"parent-child","created_at":"2026-02-06T14:37:42.978984-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-awh.2","title":"Non-SPC escape chord for agent mode","description":"Implement a dedicated key chord (e.g. Ctrl+E, Alt+E) to return from agent/shell view to main app. Must NOT use SPC as leader since space is typed naturally. Document choice in dev-log.","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-06T14:37:43.496238-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-06T15:19:24.756773-05:00","closed_at":"2026-02-06T15:19:24.756773-05:00","close_reason":"Superseded by tmux approach (devdeploy-bgt)","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-awh.2","depends_on_id":"devdeploy-awh","type":"parent-child","created_at":"2026-02-06T14:37:43.497341-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-awh.2","depends_on_id":"devdeploy-awh.1","type":"blocks","created_at":"2026-02-06T14:37:46.234089-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-awh.3","title":"Wire embedded shell into agent flow","description":"Integrate PTY shell view with RunAgentMsg, AgentRunner, and project context. Ensure project dir, plan.md, design.md are passed; agent runs in correct cwd.","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-06T14:37:43.989136-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-06T15:19:24.892674-05:00","closed_at":"2026-02-06T15:19:24.892674-05:00","close_reason":"Superseded by tmux approach (devdeploy-bgt)","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-awh.3","depends_on_id":"devdeploy-awh","type":"parent-child","created_at":"2026-02-06T14:37:43.990537-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-awh.3","depends_on_id":"devdeploy-awh.1","type":"blocks","created_at":"2026-02-06T14:37:46.350793-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-awh.3","depends_on_id":"devdeploy-awh.2","type":"blocks","created_at":"2026-02-06T14:37:46.460766-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-bgt","title":"Refactor: Use tmux pane orchestration instead of embedded PTY shell","description":"# Tmux Pane Orchestration Refactor\n\n## Overview\n\nReplace the current PTY-based ShellView overlay with tmux pane orchestration. The Bubble Tea app runs in one pane; when the user triggers \"Agent run\" (SPC a a), the app creates a new tmux pane with a shell in the project directory instead of embedding a PTY in an overlay.\n\n## Context\n\n- **Current**: ShellView spawns bash/sh via `github.com/creack/pty`, displays output in a Bubble Tea viewport, passes keys via `keyToPTYBytes`. PTY handling lives in `internal/pty` and `internal/ui/shell_view.go`.\n- **Target**: App runs inside tmux. On SPC a a, app runs `tmux split-window` to create a new pane with a shell in the project dir. User sees both panes; tmux handles rendering. No PTY in our code.\n\n## Architecture\n\n- **Pane 0**: devdeploy (Bubble Tea TUI)\n- **Other panes**: shells, created via `tmux split-window -c \u003cworkDir\u003e`, killed via `tmux kill-pane -t \u003cid\u003e`\n- **Input**: `tmux send-keys -t \u003cpane\u003e \"cmd\" Enter` when we need to send keys (optional; user types directly in pane)\n- **\"Hide\"**: `break-pane -d` to move pane to background window; `join-pane` to restore\n\n## Key Decisions\n\n1. **Require tmux**: App expects to run inside tmux. When `TMUX` is unset, show clear message: \"Run devdeploy inside tmux (e.g. \\`tmux new -s dev\\` then \\`devdeploy\\`)\".\n2. **No embedding**: Shell output stays in tmux panes; we do not capture or display it in our UI.\n3. **Keep PTY package**: Retain for tests or future non-tmux scenarios; mark as optional/fallback.\n\n## Subtasks\n\nSee child beads.","status":"closed","priority":2,"issue_type":"epic","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-06T15:15:49.570548-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-06T15:43:27.39097-05:00","closed_at":"2026-02-06T15:43:27.39097-05:00","close_reason":"All subtasks complete: tmux detection, internal/tmux package, RunAgentMsg uses split-window, hide/show panes, ShellView removed, dev-log documented. Build and tests pass.","labels":["project:devdeploy"]}
{"id":"devdeploy-bgt.1","title":"Add tmux detection and require-tmux check at startup","description":"Check TMUX env var. If unset, show status/error: 'Run devdeploy inside tmux'. Consider adding a startup gate or banner.","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-06T15:15:51.052667-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-06T15:23:33.38905-05:00","closed_at":"2026-02-06T15:23:33.38905-05:00","close_reason":"Added TMUX env check at startup; exits with clear message when unset","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-bgt.1","depends_on_id":"devdeploy-bgt","type":"parent-child","created_at":"2026-02-06T15:15:51.053621-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-bgt.2","title":"Create internal/tmux package with split-window, kill-pane, send-keys","description":"Package that execs tmux commands. Functions: SplitPane(workDir string) (paneID, error), KillPane(paneID string) error, SendKeys(paneID, keys string) error. Use TMUX from env for session targeting.","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-06T15:15:51.538238-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-06T15:26:12.95638-05:00","closed_at":"2026-02-06T15:26:12.95638-05:00","close_reason":"Created internal/tmux with SplitPane, KillPane, SendKeys; tests skip when not in tmux","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-bgt.2","depends_on_id":"devdeploy-bgt","type":"parent-child","created_at":"2026-02-06T15:15:51.539191-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-bgt.3","title":"Replace RunAgentMsg ShellView overlay with tmux split-window","description":"On RunAgentMsg: call tmux.SplitPane(projectDir) instead of pushing ShellView. User sees new pane with shell. No overlay.","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-06T15:15:52.007668-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-06T15:28:15.227026-05:00","closed_at":"2026-02-06T15:28:15.227026-05:00","close_reason":"RunAgentMsg now calls tmux.SplitPane(projectDir) instead of pushing ShellView overlay. No overlay; user sees new tmux pane with shell. Tests updated.","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-bgt.3","depends_on_id":"devdeploy-bgt","type":"parent-child","created_at":"2026-02-06T15:15:52.00882-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-bgt.3","depends_on_id":"devdeploy-bgt.1","type":"blocks","created_at":"2026-02-06T15:15:57.905851-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-bgt.3","depends_on_id":"devdeploy-bgt.2","type":"blocks","created_at":"2026-02-06T15:15:58.042799-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-bgt.4","title":"Add optional pane hide/show via break-pane and join-pane","description":"If we want 'hide agent pane': break-pane -d to move to background window. join-pane to restore. May be follow-up.","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-06T15:15:52.55562-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-06T15:34:39.996028-05:00","closed_at":"2026-02-06T15:34:39.996028-05:00","close_reason":"Added BreakPane and JoinPane to tmux package; AppModel stores agentPaneID; SPC a h / SPC a s keybinds for hide/show agent pane","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-bgt.4","depends_on_id":"devdeploy-bgt","type":"parent-child","created_at":"2026-02-06T15:15:52.556369-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-bgt.4","depends_on_id":"devdeploy-bgt.3","type":"blocks","created_at":"2026-02-06T15:15:58.158322-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-bgt.5","title":"Deprecate or remove ShellView and PTY from agent flow","description":"Remove ShellView overlay path for RunAgentMsg. Keep internal/pty for tests if needed. Update app.go to drop PTYRunner for agent flow.","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-06T15:15:53.070918-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-06T15:32:08.882124-05:00","closed_at":"2026-02-06T15:32:08.882124-05:00","close_reason":"Removed PTYRunner from AppModel, deleted ShellView. Agent flow uses tmux only. Kept internal/pty for tests.","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-bgt.5","depends_on_id":"devdeploy-bgt","type":"parent-child","created_at":"2026-02-06T15:15:53.071838-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-bgt.5","depends_on_id":"devdeploy-bgt.3","type":"blocks","created_at":"2026-02-06T15:15:58.26833-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-bgt.6","title":"Document tmux orchestration in dev-log","description":"Create dev-log entry for tmux pane orchestration decision. Add to dev-log/README.md.","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-06T15:15:53.601958-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-06T15:39:25.962654-05:00","closed_at":"2026-02-06T15:39:25.962654-05:00","close_reason":"Created dev-log/2026-02-06-tmux-pane-orchestration.md and added to README","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-bgt.6","depends_on_id":"devdeploy-bgt","type":"parent-child","created_at":"2026-02-06T15:15:53.602752-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-bgt.6","depends_on_id":"devdeploy-bgt.5","type":"blocks","created_at":"2026-02-06T15:15:58.377217-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-bkp","title":"Ralph Loop Tool: autonomous agent work loop","description":"# Ralph Loop Tool\n\n**Date**: 2026-02-08\n**Status**: proposed\n\n## Context\n\nThe current ralph action (SPC s r) launches a single interactive agent with a canned prompt. This requires a human to be present. We need a **walk-away loop**: launch it, leave, and return to find all well-specified beads completed and new \"question\" beads for anything the agent couldn't resolve autonomously.\n\n## Decision\n\nBuild `ralph` as a **dedicated Go CLI tool** in `cmd/ralph/` within this repo. devdeploy's `SPC s r` simply launches `ralph` in a tmux pane. This gives clean separation — the loop logic (polling, iteration, exit detection, question capture) doesn't belong in the TUI.\n\n### Core Loop\n1. Query `bd ready --json` filtered by project label\n2. Pick highest-priority bead\n3. Craft prompt with bead details from `bd show \u003cid\u003e`\n4. Run `agent --print --force --output-format stream-json '\u003cprompt\u003e'`\n5. Wait for agent exit, assess outcome\n6. If bead closed → success. If question beads created → continue. If error → log and skip.\n7. `bd sync`, repeat until no ready beads remain\n\n### Human-Question Protocol\nWhen agents encounter ambiguity, they create \"question\" beads (labeled `needs-human`) that block the original bead. The original drops off `bd ready`. Humans answer questions by closing them or updating context, then re-run the loop.\n\n### Key Design Choices\n- **`agent --print --force --output-format stream-json`**: non-interactive, JSON output for reliable parsing\n- **Dedicated binary**: clean separation from devdeploy TUI\n- **Same repo**: shares `internal/beads` package, easy to co-evolve\n- **Single-threaded first**: one agent at a time, concurrency is a future phase\n\n## Consequences\n- New binary to build/install alongside devdeploy\n- Beads rule updated with question protocol (agents must follow it)\n- Enables true walk-away automation for well-specified work","status":"closed","priority":1,"issue_type":"epic","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-08T21:32:16.379509-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-09T11:58:11.848311-05:00","closed_at":"2026-02-09T11:58:11.848311-05:00","close_reason":"Closed","labels":["project:devdeploy"]}
{"id":"devdeploy-bkp.1","title":"Scaffold cmd/ralph binary with CLI flags","description":"Create `cmd/ralph/main.go` with basic CLI structure using Go's flag package (or cobra if preferred for consistency).\n\n## Flags\n- `--workdir` (required): path to the worktree to operate in\n- `--project` (optional): project label filter for bd queries\n- `--label` (optional, repeatable): additional label filters\n- `--max-iterations` (default 20): safety cap on loop iterations\n- `--dry-run`: print what would be done without executing agents\n- `--verbose`: enable detailed logging\n\n## Acceptance\n- `go build ./cmd/ralph` compiles\n- `ralph --help` prints usage\n- `ralph --dry-run --workdir .` runs without error (no-op loop)","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-08T21:32:26.199392-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-08T21:48:53.448219-05:00","closed_at":"2026-02-08T21:48:53.448219-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-bkp.1","depends_on_id":"devdeploy-bkp","type":"parent-child","created_at":"2026-02-08T21:32:26.200562-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-bkp.10","title":"Concurrent agent execution: multiple beads in parallel","description":"Extend ralph to run multiple agents concurrently on independent beads.\n\n## Design\n- `--concurrency N` flag (default 1, current behavior)\n- Worker pool pattern: N goroutines each running the pick→execute→assess cycle\n- Bead picker must be goroutine-safe (mutex or channel-based)\n- Each worker gets its own worktree (or uses git stash isolation)\n- Conflict detection: if two agents touch the same files, one must wait\n\n## Worktree isolation\n- Each concurrent agent needs its own git worktree to avoid conflicts\n- ralph creates temporary worktrees: `git worktree add /tmp/ralph-\u003cbead-id\u003e \u003cbranch\u003e`\n- Clean up worktrees after each iteration\n\n## Open questions\n- How to handle merge conflicts between concurrent agent outputs?\n- Should agents work on the same branch or separate branches?\n- PR-based workflow (each agent creates a PR) vs direct commit?\n\n## Acceptance\n- N=1 behaves identically to current loop\n- N\u003e1 runs agents in parallel with correct isolation\n- No data races (go test -race passes)","status":"closed","priority":3,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-08T21:33:52.045461-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-09T12:08:11.967331-05:00","closed_at":"2026-02-09T12:08:11.967331-05:00","close_reason":"Closed","labels":["future","project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-bkp.10","depends_on_id":"devdeploy-bkp","type":"parent-child","created_at":"2026-02-08T21:33:52.046806-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-bkp.10","depends_on_id":"devdeploy-bkp.7","type":"blocks","created_at":"2026-02-08T21:33:52.048107-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-bkp.11","title":"Live progress streaming from ralph to devdeploy TUI","description":"Stream ralph loop progress back to devdeploy TUI for real-time visibility.\n\n## Design options\n1. **File-based**: ralph writes a JSON status file; devdeploy polls it\n2. **Unix socket / named pipe**: ralph writes progress events; devdeploy reads them\n3. **tmux capture-pane**: devdeploy reads ralph's terminal output (already possible but unstructured)\n\n## Display in devdeploy\n- Show current iteration, bead being worked, elapsed time\n- Show running tally: N completed, N questions, N failed\n- Integrate with existing progress infrastructure (internal/progress)\n\n## Acceptance\n- devdeploy shows live ralph status without switching to ralph's tmux pane\n- Progress updates within ~1s of ralph state changes","status":"closed","priority":3,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-08T21:34:00.331757-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-09T12:09:44.924488-05:00","closed_at":"2026-02-09T12:09:44.924488-05:00","close_reason":"Closed","labels":["future","project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-bkp.11","depends_on_id":"devdeploy-bkp","type":"parent-child","created_at":"2026-02-08T21:34:00.332926-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-bkp.11","depends_on_id":"devdeploy-bkp.9","type":"blocks","created_at":"2026-02-08T21:34:00.334146-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-bkp.12","title":"Smart bead selection: complexity estimation and ordering heuristics","description":"Improve bead selection beyond simple priority ordering.\n\n## Potential heuristics\n- Estimate complexity from description length, number of files mentioned, dependency count\n- Prefer beads with more context (longer descriptions = better specified)\n- Prefer leaf beads (no children) over parent beads\n- Factor in past failure history (deprioritize beads that failed before)\n- Time-of-day awareness (schedule complex beads for longer unattended windows)\n\n## Acceptance\n- Pluggable scoring function for bead selection\n- Default scorer uses priority + creation date (current behavior)\n- At least one alternative scorer implemented","status":"closed","priority":3,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-08T21:34:07.905035-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-09T12:10:33.964334-05:00","closed_at":"2026-02-09T12:10:33.964334-05:00","close_reason":"Closed","labels":["future","project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-bkp.12","depends_on_id":"devdeploy-bkp","type":"parent-child","created_at":"2026-02-08T21:34:07.90604-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-bkp.12","depends_on_id":"devdeploy-bkp.2","type":"blocks","created_at":"2026-02-08T21:34:07.907419-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-bkp.13","title":"Epic focus: add --epic flag to ralph to filter beads to children of a specific epic","description":"## Problem\nWhen running ralph from devdeploy with an epic selected (e.g., bkp), the loop should focus only on that epic's children. Currently there's no way to do this.\n\n## Solution\n1. Add `--epic` flag to cmd/ralph/main.go\n2. Add `Epic string` field to `LoopConfig` in loop.go\n3. Add `Epic string` field to `BeadPicker` in picker.go\n4. Modify `BeadPicker.Next()` and `BeadPicker.Count()` to add `--parent \u003cepic\u003e` when Epic is set\n\n## Implementation\nIn picker.go, add to the args building:\n```go\nif p.Epic != \"\" {\n    args = append(args, \"--parent\", p.Epic)\n}\n```\n\nThis uses the existing `bd ready --parent \u003cepic\u003e` capability to filter to descendants of the epic.","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-09T11:31:56.1246-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-09T11:34:18.227107-05:00","closed_at":"2026-02-09T11:34:18.227107-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-bkp.13","depends_on_id":"devdeploy-bkp","type":"parent-child","created_at":"2026-02-09T11:31:56.125492-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-bkp.2","title":"Bead picker: query and select next bead","description":"Implement bead selection logic in an internal package (e.g., `internal/ralph/picker.go`).\n\n## Behavior\n1. Run `bd ready --label project:\u003cname\u003e --json` in the workdir\n2. Parse JSON output into bead structs (reuse or extend `internal/beads`)\n3. Filter by any additional `--label` flags\n4. Sort by priority (P0 highest), then by creation date (oldest first)\n5. Return the top bead, or nil if none available\n\n## Interface\n```go\ntype BeadPicker struct {\n    WorkDir string\n    Project string\n    Labels  []string\n}\n\nfunc (p *BeadPicker) Next() (*beads.Bead, error)\n```\n\n## Acceptance\n- Unit tests with mocked bd output\n- Correct priority ordering\n- Returns nil when no beads available","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-08T21:32:34.651068-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-08T22:02:51.518886-05:00","closed_at":"2026-02-08T22:02:51.518886-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-bkp.2","depends_on_id":"devdeploy-bkp","type":"parent-child","created_at":"2026-02-08T21:32:34.652217-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-bkp.2","depends_on_id":"devdeploy-bkp.1","type":"blocks","created_at":"2026-02-08T21:32:34.653151-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-bkp.3","title":"Prompt template: craft agent prompt from bead","description":"Build the prompt template that ralph sends to the agent for each bead iteration.\n\n## Prompt must include\n1. The bead ID, title, and full description (from `bd show \u003cid\u003e --json`)\n2. Instructions to claim the bead (`bd update \u003cid\u003e --status in_progress`)\n3. Instructions to close the bead when done (`bd close \u003cid\u003e`)\n4. The human-question protocol: if the bead is ambiguous or needs info, create a question bead with `needs-human` label and blocking dependency, then stop working on that bead\n5. Instructions to follow `.cursor/rules/` and AGENTS.md\n6. Instructions to push work when done\n\n## Design\n- Go template (text/template) for flexibility\n- Bead details injected as template variables\n- Keep prompt concise but complete — agent context window is precious\n\n## Acceptance\n- Template renders correctly with sample bead data\n- Contains all required instruction sections\n- Unit tests for template rendering","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-08T21:32:43.093463-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-08T22:05:42.891662-05:00","closed_at":"2026-02-08T22:05:42.891662-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-bkp.3","depends_on_id":"devdeploy-bkp","type":"parent-child","created_at":"2026-02-08T21:32:43.094614-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-bkp.3","depends_on_id":"devdeploy-bkp.2","type":"blocks","created_at":"2026-02-08T21:32:43.095597-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-bkp.4","title":"Agent executor: spawn agent --print --force with JSON output","description":"Implement agent subprocess management in `internal/ralph/executor.go`.\n\n## Behavior\n1. Spawn `agent --print --force --output-format stream-json '\u003cprompt\u003e'` as a child process\n2. Set working directory to the worktree\n3. Capture stdout (stream-json output) and stderr\n4. Respect a per-iteration timeout (configurable, default 10 minutes)\n5. Return: exit code, stdout content, stderr content, duration\n\n## Interface\n```go\ntype AgentResult struct {\n    ExitCode int\n    Stdout   string\n    Stderr   string\n    Duration time.Duration\n}\n\nfunc RunAgent(ctx context.Context, workDir string, prompt string) (*AgentResult, error)\n```\n\n## Considerations\n- Use `exec.CommandContext` with timeout context for hard kill\n- Stream stdout to log in real-time (tee to buffer + os.Stdout for observability)\n- Handle agent crashes gracefully (non-zero exit, signal kills)\n\n## Acceptance\n- Can spawn agent and capture output\n- Timeout kills the process\n- Unit tests with mock command (test the plumbing, not agent itself)","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-08T21:32:52.660836-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-08T21:55:08.269542-05:00","closed_at":"2026-02-08T21:55:08.269542-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-bkp.4","depends_on_id":"devdeploy-bkp","type":"parent-child","created_at":"2026-02-08T21:32:52.661678-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-bkp.4","depends_on_id":"devdeploy-bkp.1","type":"blocks","created_at":"2026-02-08T21:32:52.662623-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-bkp.5","title":"Iteration outcome assessment: detect success, questions, errors","description":"After each agent run, assess what happened. Implement in `internal/ralph/assess.go`.\n\n## Outcome categories\n1. **Success**: The target bead is now closed (check `bd show \u003cid\u003e --json`, status=closed)\n2. **Question created**: The target bead is still open but now has blocking dependencies with `needs-human` label\n3. **Failure**: Agent exited non-zero, or bead is still open with no new blockers\n4. **Timeout**: Agent was killed due to timeout\n\n## Interface\n```go\ntype Outcome int\nconst (\n    OutcomeSuccess Outcome = iota\n    OutcomeQuestion\n    OutcomeFailure\n    OutcomeTimeout\n)\n\nfunc Assess(workDir string, beadID string, result *AgentResult) (Outcome, string)\n```\n\nThe string return is a human-readable summary for logging.\n\n## Acceptance\n- Correctly detects all four outcome types\n- Unit tests with mocked bd output for each scenario","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-08T21:33:02.286423-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-08T21:58:55.950487-05:00","closed_at":"2026-02-08T21:58:55.950487-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-bkp.5","depends_on_id":"devdeploy-bkp","type":"parent-child","created_at":"2026-02-08T21:33:02.287565-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-bkp.5","depends_on_id":"devdeploy-bkp.4","type":"blocks","created_at":"2026-02-08T21:33:02.288594-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-bkp.6","title":"Core loop engine: tie picker, executor, assessment into iteration loop","description":"The main loop in `internal/ralph/loop.go` that ties everything together.\n\n## Loop logic\n```\niteration = 0\nconsecutive_failures = 0\nwhile iteration \u003c max_iterations:\n    bead = picker.Next()\n    if bead == nil:\n        log \"No ready beads. Done.\"\n        break\n    \n    prompt = template.Render(bead)\n    result = executor.RunAgent(ctx, workDir, prompt)\n    outcome = assess(workDir, bead.ID, result)\n    \n    log iteration summary\n    \n    switch outcome:\n        case Success:\n            consecutive_failures = 0\n        case Question:\n            consecutive_failures = 0  // question is a valid outcome\n        case Failure, Timeout:\n            consecutive_failures++\n            if consecutive_failures \u003e= 3:\n                log \"Too many consecutive failures. Stopping.\"\n                break\n\n    bd sync\n    iteration++\n\nlog final summary (N succeeded, N questions, N failed)\n```\n\n## Integration with cmd/ralph\n- `cmd/ralph/main.go` parses flags, constructs a `ralph.LoopConfig`, calls `ralph.Run(ctx, config)`\n- LoopConfig holds: WorkDir, Project, Labels, MaxIterations, DryRun, Verbose\n\n## Acceptance\n- End-to-end loop works with real agent (manual test)\n- Unit tests with mocked picker/executor for loop control flow\n- Dry-run mode prints plan without executing","status":"closed","priority":1,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-08T21:33:13.394345-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-09T11:17:29.958723-05:00","closed_at":"2026-02-09T11:17:29.958723-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-bkp.6","depends_on_id":"devdeploy-bkp","type":"parent-child","created_at":"2026-02-08T21:33:13.395463-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-bkp.6","depends_on_id":"devdeploy-bkp.2","type":"blocks","created_at":"2026-02-08T21:33:13.39648-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-bkp.6","depends_on_id":"devdeploy-bkp.3","type":"blocks","created_at":"2026-02-08T21:33:13.397204-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-bkp.6","depends_on_id":"devdeploy-bkp.4","type":"blocks","created_at":"2026-02-08T21:33:13.397871-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-bkp.6","depends_on_id":"devdeploy-bkp.5","type":"blocks","created_at":"2026-02-08T21:33:13.398549-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-bkp.7","title":"Guard rails: timeout, max iterations, repeated failure detection","description":"Safety mechanisms to prevent runaway loops.\n\n## Guards\n1. **Max iterations** (--max-iterations, default 20): hard cap on total loop cycles\n2. **Per-agent timeout** (--agent-timeout, default 10m): kills agent if it hangs\n3. **Consecutive failure limit** (default 3): stops loop if N agents fail in a row\n4. **Same-bead retry detection**: if the same bead ID appears as the next pick after a failure, skip it and try the next one. Track skipped beads to avoid infinite loops.\n5. **Total wall-clock timeout** (--timeout, default 2h): hard cap on entire ralph session\n\n## Acceptance\n- Each guard triggers correctly in unit tests\n- Clear log messages when a guard triggers\n- ralph exits with distinct exit codes for each termination reason","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-08T21:33:22.039843-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-09T11:25:54.921274-05:00","closed_at":"2026-02-09T11:25:54.921274-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-bkp.7","depends_on_id":"devdeploy-bkp","type":"parent-child","created_at":"2026-02-08T21:33:22.040744-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-bkp.7","depends_on_id":"devdeploy-bkp.6","type":"blocks","created_at":"2026-02-08T21:33:22.04179-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-bkp.8","title":"Structured logging and summary output","description":"Add structured, human-readable logging to ralph.\n\n## Per-iteration log line\n```\n[2/20] devdeploy-abc \"Fix the thing\" → success (2m34s)\n[3/20] devdeploy-def \"Add feature X\" → question: created devdeploy-xyz (1m12s)\n[4/20] devdeploy-ghi \"Refactor auth\" → failed: exit code 1 (10m00s timeout)\n```\n\n## End-of-loop summary\n```\nRalph loop complete:\n  ✓ 5 beads completed\n  ? 2 questions created (needs human)\n  ✗ 1 failure\n  ○ 3 beads remaining (blocked)\n  Duration: 42m18s\n```\n\n## Acceptance\n- Output is clear and scannable in a terminal\n- Verbose mode (--verbose) includes agent stdout/stderr excerpts\n- Summary is always printed even on early termination","status":"closed","priority":3,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-08T21:33:32.044157-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-09T11:29:00.212785-05:00","closed_at":"2026-02-09T11:29:00.212785-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-bkp.8","depends_on_id":"devdeploy-bkp","type":"parent-child","created_at":"2026-02-08T21:33:32.045194-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-bkp.8","depends_on_id":"devdeploy-bkp.6","type":"blocks","created_at":"2026-02-08T21:33:32.046372-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-bkp.9","title":"devdeploy integration: SPC s r launches ralph binary","description":"Update devdeploy's SPC s r handler to launch the ralph binary instead of bare agent.\n\n## Changes\n1. Update `LaunchRalphMsg` handler in `internal/ui/app.go`:\n   - Instead of `agent '\u003cralphPrompt\u003e'`, run `ralph --project \u003cname\u003e --workdir \u003cdir\u003e`\n   - Remove the `ralphPrompt` constant (ralph has its own prompt template)\n2. Detect ralph binary availability (which ralph || PATH check)\n3. Fall back to current behavior if ralph not found (with status message)\n\n## Considerations\n- ralph must be in PATH or co-located with devdeploy binary\n- Project name comes from the current project context\n- Workdir comes from `ensureResourceWorktree`\n\n## Acceptance\n- SPC s r launches ralph in tmux pane\n- Status shows \"Ralph loop launched\" on success\n- Graceful fallback if ralph binary not found\n- Existing tests updated","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-08T21:33:41.352997-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-09T11:42:17.888256-05:00","closed_at":"2026-02-09T11:42:17.888256-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-bkp.9","depends_on_id":"devdeploy-bkp","type":"parent-child","created_at":"2026-02-08T21:33:41.353834-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-bkp.9","depends_on_id":"devdeploy-bkp.6","type":"blocks","created_at":"2026-02-08T21:33:41.354846-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-btg","title":"UI cleanup: simplify with charmbracelet/bubbles pre-built components","description":"Audit the internal/ui package and replace hand-rolled components with charmbracelet/bubbles equivalents where it reduces code and improves consistency. The project already depends on bubbles v0.21.1 and uses textinput, list, and viewport in some places, but several views still reimplement patterns that bubbles handles out of the box.\n\n## Scope\n\n1. Dashboard list → bubbles/list.Model (replace ~100 lines of custom j/k/g/G navigation + rendering)\n2. Project detail scrolling → bubbles/viewport.Model (replace ~120 lines of custom scroll management)\n3. Keybind help rendering → bubbles/help.Model + key.Binding (standardize help bar rendering)\n4. Loading spinner → bubbles/spinner.Model (show spinner while projects load async)\n5. Consolidate confirmation modals (DeleteProject + RemoveResource are nearly identical)\n6. Extract shared modal styles (DRY up repeated lipgloss style definitions across modals)\n\n## Non-goals\n\n- The spacemacs-style leader key system (SPC prefix sequences) is unique to this app and has no bubbles equivalent. Keep custom KeyHandler/KeybindRegistry for multi-key dispatch.\n- The overlay stack pattern has no bubbles equivalent. Keep as-is.","status":"closed","priority":2,"issue_type":"epic","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-09T11:10:46.608998-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-09T12:02:03.005407-05:00","closed_at":"2026-02-09T12:02:03.005407-05:00","close_reason":"Closed","labels":["project:devdeploy"]}
{"id":"devdeploy-btg.1","title":"Replace DashboardView with bubbles/list.Model","description":"Replace the hand-rolled DashboardView (dashboard.go) with bubbles/list.Model.\n\n## Current state\nDashboardView manually implements:\n- j/k/up/down navigation with Selected index\n- g/G jump to top/bottom\n- Bullet rendering (● for selected) with lipgloss styles\n- ProjectSummary rendering with repo/PR/bead counts\n\nThis is ~106 lines of custom code that reimplements what list.Model provides.\n\n## Plan\n1. Make ProjectSummary implement list.Item (Title/Description/FilterValue)\n2. Replace DashboardView internals with a list.Model field\n3. Configure list.Model: disable filtering (for now), disable help (we have our own), disable quit keybindings\n4. Wire up Enter to still emit SelectProjectMsg\n5. Update dashboard_test.go — tests check Selected index and View output; adapt to list.Model API\n6. Keep the DashboardView struct as the outer container so app.go doesn't change\n\n## Benefits\n- Gets fuzzy filtering for free (can enable later)\n- Gets pagination for free\n- Gets consistent keyboard handling\n- ~80 fewer lines of custom code\n\n## Risks\n- Tests that check exact rendering output (bullet ●, exact formatting) will need adjustment\n- list.Model's default delegate renders Title + Description; need custom delegate or use simple delegate for single-line items","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","estimated_minutes":120,"created_at":"2026-02-09T11:11:00.294121-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-09T12:02:48.136533-05:00","closed_at":"2026-02-09T12:02:48.136533-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-btg.1","depends_on_id":"devdeploy-btg","type":"parent-child","created_at":"2026-02-09T11:11:00.294937-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-btg.2","title":"Replace ProjectDetailView custom scrolling with bubbles/viewport","description":"Replace the hand-rolled scroll management in ProjectDetailView (projectdetail.go) with bubbles/viewport.Model.\n\n## Current state\nProjectDetailView manually implements:\n- scrollOffset tracking\n- cursorRow() calculation (~20 lines)\n- ensureVisible() for viewport follow (~20 lines)\n- Line-level clipping in View() with ↑/↓ scroll indicators (~40 lines)\n- viewHeight() calculation based on terminal dimensions\n\nThis is ~120 lines of custom viewport code. The viewport bubble is already used successfully in ProgressWindow.\n\n## Plan\n1. Add a viewport.Model field to ProjectDetailView\n2. Render all content into a string, then set it as viewport content (same pattern as ProgressWindow)\n3. Use viewport's built-in scrolling instead of manual scrollOffset/ensureVisible\n4. The two-level cursor (resource header + nested beads) stays as custom navigation — viewport just handles the scroll container\n5. After each cursor move, call viewport.GotoBottom or set viewport.YOffset to keep the cursor visible\n6. Remove scrollOffset, cursorRow, ensureVisible, viewHeight, and the manual clipping code from View()\n7. Update projectdetail_test.go scroll tests\n\n## Complexity\nThis is the trickiest task because the two-level cursor navigation (resources + beads) needs to compute the cursor's line position and tell the viewport where to scroll. The cursor tracking stays custom, but scroll rendering moves to viewport.\n\n## Benefits\n- Removes ~80 lines of manual scroll management\n- Consistent scroll behavior with ProgressWindow\n- Mouse wheel support for free","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","estimated_minutes":180,"created_at":"2026-02-09T11:11:10.434308-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-09T12:03:49.077107-05:00","closed_at":"2026-02-09T12:03:49.077107-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-btg.2","depends_on_id":"devdeploy-btg","type":"parent-child","created_at":"2026-02-09T11:11:10.435244-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-btg.3","title":"Use key.Binding + help.Model for keybind help rendering","description":"Replace custom keybind help rendering (keybind_help.go) with bubbles/help.Model and use key.Binding for binding definitions.\n\n## Current state\n- keybind_help.go: RenderKeybindHelp renders a custom help bar with key:desc pairs in a bordered box (~63 lines)\n- keybind.go: KeybindRegistry stores bindings as map[string]tea.Cmd with separate descriptions map and mode filters\n\nThe help rendering is similar to what help.Model provides out of the box.\n\n## Plan\n1. Define a KeyMap struct implementing help.KeyMap (ShortHelp/FullHelp) that wraps the existing registry\n2. Convert SPC-prefixed bindings to key.Binding instances with WithHelp for display\n3. Replace RenderKeybindHelp with help.Model.View() for the leader hint bar\n4. Keep the custom KeyHandler for multi-key sequence dispatch (SPC + key + key) — help.Model only handles rendering\n5. The mode-aware filtering can be done by enabling/disabling key.Bindings based on current AppMode\n6. Update keybind_test.go for new hint rendering\n\n## Non-goal\nThe leader key dispatch system (KeyHandler, Buffer, LeaderWaiting) stays custom — bubbles has no equivalent for multi-key sequences.\n\n## Benefits\n- Standard help rendering with adaptive colors\n- Width-aware truncation built in\n- Fewer custom rendering lines","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","estimated_minutes":120,"created_at":"2026-02-09T11:11:19.702642-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-09T12:04:40.434457-05:00","closed_at":"2026-02-09T12:04:40.434457-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-btg.3","depends_on_id":"devdeploy-btg","type":"parent-child","created_at":"2026-02-09T11:11:19.703778-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-btg.4","title":"Add bubbles/spinner for dashboard loading state","description":"Add a bubbles/spinner.Model to DashboardView to indicate when projects are loading.\n\n## Current state\nloadProjectsCmd runs async and sends ProjectsLoadedMsg when done. During loading, the dashboard shows an empty project list with \"(0)\" count, giving no feedback that data is coming.\n\n## Plan\n1. Add spinner.Model field to DashboardView (or AppModel)\n2. Start spinner in Init() alongside loadProjectsCmd\n3. Show spinner in View() when Projects is nil (loading) vs empty slice (loaded, no projects)\n4. Stop spinner on ProjectsLoadedMsg\n5. Choose a subtle spinner style (e.g., spinner.Dot or spinner.MiniDot)\n\n## Benefits\n- User sees immediate feedback that something is happening\n- Distinguishes \"loading\" from \"no projects\"\n- ~15 lines of code","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","estimated_minutes":45,"created_at":"2026-02-09T11:11:26.776348-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-09T12:05:09.150761-05:00","closed_at":"2026-02-09T12:05:09.150761-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-btg.4","depends_on_id":"devdeploy-btg","type":"parent-child","created_at":"2026-02-09T11:11:26.777377-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-btg.5","title":"Consolidate DeleteProject and RemoveResource confirmation modals","description":"Merge DeleteProjectConfirmModal and RemoveResourceConfirmModal into a single generic ConfirmModal component.\n\n## Current state\nBoth modals follow the exact same pattern:\n- Show title + content + \"y/Enter: confirm  Esc: cancel\"\n- Handle esc → DismissModalMsg, enter/y → action message\n- Same lipgloss border styling (rounded border, colored)\n\nThe only differences are:\n- Title text (\"Delete project?\" vs \"Remove resource?\")\n- Body content (project name vs resource label + warnings)\n- Confirm message type (DeleteProjectMsg vs RemoveResourceMsg)\n- Border color (196 for both)\n\n## Plan\n1. Create ConfirmModal struct with fields: Title, Content, OnConfirm func() tea.Msg, BorderColor\n2. Replace both concrete modals with ConfirmModal instances\n3. Callers construct ConfirmModal with the appropriate title/content/action\n4. Keep NewDeleteProjectConfirmModal and NewRemoveResourceConfirmModal as factory functions for backward compatibility\n5. Update tests to work with new generic type\n\n## Benefits\n- Removes ~40 lines of duplicated modal code\n- Single place to update confirmation modal styling\n- Easy to add new confirmation dialogs in the future","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","estimated_minutes":60,"created_at":"2026-02-09T11:11:33.39227-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-09T12:05:46.346216-05:00","closed_at":"2026-02-09T12:05:46.346216-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-btg.5","depends_on_id":"devdeploy-btg","type":"parent-child","created_at":"2026-02-09T11:11:33.393514-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-btg.6","title":"Extract shared modal styles into a theme/styles file","description":"Extract repeated lipgloss style definitions into a shared styles.go file.\n\n## Current state\nEvery modal and view defines its own lipgloss styles inline:\n- titleStyle (Bold, Color 86) — used in dashboard.go, projectdetail.go, progress_window.go, modal_create_project.go\n- boxStyle (RoundedBorder, Color 205 or 196, padding/margin) — used in all modals\n- selectedStyle (Color 205, Bold) — used in dashboard.go, projectdetail.go\n- normalStyle / dimStyle (Color 241) — used everywhere\n- hintStyle (Color 241) — used in all modals for \"Enter: X  Esc: cancel\"\n\nThese are duplicated across 8+ files with minor variations.\n\n## Plan\n1. Create internal/ui/styles.go with exported style vars\n2. Define a small palette: theme colors (accent=86, highlight=205, danger=196, muted=241, text=252)\n3. Define reusable styles: TitleStyle, BoxStyle, DangerBoxStyle, SelectedStyle, MutedStyle, HintStyle\n4. Replace inline style definitions across all view and modal files\n5. No behavioral changes — purely cosmetic refactor\n\n## Benefits\n- Single source of truth for the color palette\n- Easy to update the theme globally\n- Removes ~50 lines of duplicated style definitions","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","estimated_minutes":30,"created_at":"2026-02-09T11:11:41.465776-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-09T12:06:40.83387-05:00","closed_at":"2026-02-09T12:06:40.83387-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-btg.6","depends_on_id":"devdeploy-btg","type":"parent-child","created_at":"2026-02-09T11:11:41.466612-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-c5h","title":"Randomize branch name when adding repos","description":"When AddRepo creates a new branch (devdeploy/\u003cproject\u003e), append 3 random alphanumeric characters at the end to reduce collisions when multiple devdeploy instances or users add the same project. Example: devdeploy/my-project-a7k","status":"closed","priority":2,"issue_type":"feature","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-06T14:22:00.58227-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-06T14:24:01.996205-05:00","closed_at":"2026-02-06T14:24:01.996205-05:00","close_reason":"Appended 3 random alphanumeric chars to branch name in AddRepo","labels":["project:devdeploy"]}
{"id":"devdeploy-dig","title":"Filter PRs to only mine and those requesting review from adaptive-telemetry team","description":"PR list should be filtered to include only PRs authored by me and PRs that request a review from the adaptive-telemetry team. All other PRs should be excluded.","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-09T09:51:51.096708-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-09T10:36:50.892139-05:00","closed_at":"2026-02-09T10:36:50.892139-05:00","close_reason":"Closed","labels":["project:devdeploy"]}
{"id":"devdeploy-e4o","title":"Extract test helper for AppModel setup in app_test.go","description":"Every test in internal/ui/app_test.go repeats ~15 lines of identical setup: temp dir, os.Setenv, artifact.NewStore, project.NewManager, build AppModel. Extract a newTestApp(t) helper. This reduces duplication and means adding a new required field to AppModel only needs one update instead of 13.","status":"closed","priority":3,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-07T16:31:34.932306-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-07T18:56:53.659084-05:00","closed_at":"2026-02-07T18:56:53.659084-05:00","close_reason":"Closed","labels":["project:devdeploy"]}
{"id":"devdeploy-e56","title":"Align tmux keybinds with Spacemacs-style (non-SPC leader)","description":"Configure tmux to use Spacemacs-style keybind structure for consistency with devdeploy. SPC is NOT suitable as tmux leader — space is typed constantly in terminals and would trigger accidental commands. Use a different leader (e.g. Ctrl+a, Ctrl+E) with Spacemacs-like submenus: leader w for windows, leader s for splits, vim-style pane navigation. Deliverable: tmux config or documented keybind mapping in dev-log.","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-06T15:36:14.413697-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-06T15:40:41.282022-05:00","closed_at":"2026-02-06T15:40:41.282022-05:00","close_reason":"Added contrib/tmux.conf and dev-log/2026-02-06-tmux-spacemacs-keybinds.md with C-a leader, prefix w/s submenus, vim-style pane nav","labels":["project:devdeploy"]}
{"id":"devdeploy-fre","title":"Audit unused UI abstractions: FocusManager, ViewStack, Panel, Layout","description":"FocusManager (focus.go), ViewStack (viewstack.go), Panel (panel.go), and Layout (layout.go) were built in Phase 2 but appear unused by the current app. The app uses AppModel mode switching + OverlayStack instead. Decide: if planned for future use, add tests; if not, remove to reduce surface area. ~150 LOC of untested dead code.","status":"closed","priority":3,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-07T16:31:48.078794-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-07T19:59:30.343545-05:00","closed_at":"2026-02-07T19:59:30.343545-05:00","close_reason":"Closed","labels":["project:devdeploy"]}
{"id":"devdeploy-frj","title":"Fix orphaned worktrees when projects are deleted","description":"DeleteProject uses os.RemoveAll(dir) which removes the project directory and worktree subdirs from disk, but does not run 'git worktree remove' for each worktree. The main repo in ~/workspace still has worktree entries pointing to deleted paths, leaving orphaned worktrees. Fix: before os.RemoveAll, iterate over ListProjectRepos and call RemoveRepo (or equivalent git worktree remove) for each repo, then remove the project dir.","status":"closed","priority":2,"issue_type":"bug","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-06T14:25:02.789673-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-06T14:25:28.311795-05:00","closed_at":"2026-02-06T14:25:28.311795-05:00","close_reason":"DeleteProject now iterates over ListProjectRepos and calls RemoveRepo for each worktree before os.RemoveAll, preventing orphaned worktree entries in the main repo","labels":["project:devdeploy"]}
{"id":"devdeploy-fyt","title":"Project detail view filtering UX improvements","description":"The project detail view has two UX issues with filtering:\n\n## Issue 1: Random blue square at top\nWhen filtering is enabled on the bubbles/list, there's a filter input area that shows with default styling (appears as a blue square) even when not actively filtering.\n\n## Issue 2: Filter/keybind conflicts\nWhen pressing `/` to filter, the user expects to:\n1. Type filter text\n2. Press `enter` to confirm the filter\n3. Navigate the filtered list with j/k\n4. Use SPC commands to act on selected items\n\nBut currently:\n- `enter` is intercepted by app.go to open shell (line 593-594)\n- `esc` is intercepted to go back to dashboard (line 588-591)\n- These should only trigger when NOT in `Filtering` state\n\n## Solution\n\nCheck `list.FilterState()` in projectdetail.go and app.go:\n- When `Filtering`: let list handle enter/esc\n- When `FilterApplied` or `Unfiltered`: normal keybind behavior\n- Style or hide the filter input area when not actively filtering\n\nRelevant files:\n- `internal/ui/projectdetail.go`\n- `internal/ui/app.go`\n- `internal/ui/styles.go`","status":"in_progress","priority":2,"issue_type":"epic","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-09T13:08:56.300732-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-09T13:28:54.840828-05:00","labels":["project:devdeploy"]}
{"id":"devdeploy-fyt.1","title":"Fix keybind conflicts with list filtering mode","description":"In `app.go`, the `enter` and `esc` keys are intercepted before the list can handle them during filtering.\n\n## Current behavior (broken)\n- User presses `/` to start filtering\n- Types filter text\n- Presses `enter` → opens shell instead of confirming filter\n- Presses `esc` → goes to dashboard instead of canceling filter\n\n## Fix\nIn `app.go` Update(), check if we're in project detail mode AND the list is in `Filtering` state:\n\n```go\nif a.Mode == ModeProjectDetail \u0026\u0026 msg.String() == \"enter\" {\n    // Don't intercept enter if list is filtering\n    if a.Detail != nil \u0026\u0026 a.Detail.list.FilterState() == list.Filtering {\n        // Let it fall through to view update\n    } else {\n        return a, func() tea.Msg { return OpenShellMsg{} }\n    }\n}\n```\n\nSimilar for `esc` - should cancel filter mode, not go back to dashboard.\n\n## Files\n- `internal/ui/app.go`: Lines 588-598\n- `internal/ui/projectdetail.go`: Need to expose FilterState or add IsFiltering() method","status":"closed","priority":1,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-09T13:09:04.804308-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-09T13:27:58.428979-05:00","closed_at":"2026-02-09T13:27:58.428979-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-fyt.1","depends_on_id":"devdeploy-fyt","type":"parent-child","created_at":"2026-02-09T13:09:04.805499-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-fyt.2","title":"Remove/style the blue square filter input area","description":"The bubbles/list component shows a filter input area when filtering is enabled. This appears as a blue square at the top of the project detail view even when not actively filtering.\n\n## Options\n\n1. **Style the filter input**: Set `list.Styles.FilterPrompt`, `FilterCursor`, `FilterMatch` to use our theme colors instead of defaults\n\n2. **Hide when not filtering**: Only show the filter input during `Filtering` state (might require custom rendering)\n\n3. **Use filter prompt style**: Set a custom filter prompt like \"/\" or \"Filter:\" to make it clear what the input is for\n\n## Investigation needed\n- Identify which list style is causing the blue square\n- Check bubbles/list docs for filter styling options\n\n## Files\n- `internal/ui/projectdetail.go`: List initialization\n- `internal/ui/styles.go`: Add filter-related styles if needed","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-09T13:09:13.323976-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-09T13:29:57.397214-05:00","closed_at":"2026-02-09T13:29:57.397214-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-fyt.2","depends_on_id":"devdeploy-fyt","type":"parent-child","created_at":"2026-02-09T13:09:13.32506-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-fyt.3","title":"Add tests for filter mode interaction","description":"Add test coverage for the filter workflow in project detail view:\n\n## Test cases\n\n1. **Filter flow**: `/` → type → `enter` → filter applied\n2. **Cancel filter**: `/` → type → `esc` → filter cleared, stay in detail view\n3. **Navigation after filter**: Filter applied → j/k navigation works\n4. **SPC commands after filter**: Filter applied → SPC commands work normally\n5. **Enter after filter**: Filter applied → `enter` opens shell on selected item\n\n## Files\n- `internal/ui/projectdetail_test.go`\n- `internal/ui/app_test.go`","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-09T13:09:20.556272-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-09T13:31:29.033789-05:00","closed_at":"2026-02-09T13:31:29.033789-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-fyt.3","depends_on_id":"devdeploy-fyt","type":"parent-child","created_at":"2026-02-09T13:09:20.557396-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-hn0","title":"Remove startup EnsureLayout tmux split","description":"When devdeploy launches, main.go calls tmux.EnsureLayout() which splits the current tmux window horizontally if it has only one pane. This is unwanted — it splits the user's window for no reason on every launch. Remove the EnsureLayout() call from cmd/devdeploy/main.go and consider removing or deprecating the EnsureLayout function itself. The layout should only be created on-demand (e.g. when SPC s s opens a shell), not eagerly on startup.","status":"closed","priority":1,"issue_type":"bug","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-08T22:09:01.404013-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-08T22:17:55.734969-05:00","closed_at":"2026-02-08T22:17:55.734969-05:00","close_reason":"Removed EnsureLayout() call from main.go and deleted EnsureLayout/WindowPaneCount functions and tests from internal/tmux. Layout is no longer eagerly created on startup.","labels":["project:devdeploy"]}
{"id":"devdeploy-i1u","title":"DevDeploy: Engineer Workflow TUI with Agent Support","description":"# DevDeploy: Vision and Long-Term Roadmap\n\n**Date**: 2025-02-06\n**Status**: proposed\n\n## Philosophy\n\nDevDeploy exists to **aid engineers in their day-to-day workflow** of designing, writing, reviewing, deploying, and testing code. The workflow increasingly makes use of **agentic workflows**, so managing agent context, plans, and execution is a first-class concern.\n\n## Core Requirements\n\n### Input \u0026 Navigation\n- **vim + spacemacs keybinds** — familiar modal editing and navigation\n- **Leader keys** — SPC as primary leader for command discovery\n- **Keybind hints** — after hitting SPC, show available commands as hints (discoverability)\n\n### Agent Workflow UX\n- **Live progress windows** — see everything done on your behalf in real time\n- **Abort at any time** — ability to cancel/stop agent operations mid-flight\n\n### Technical Foundation\n- **Go + Bubble Tea / Charm Bracelet** — TUI framework choice\n- **Complex UI** — invest in right abstractions to make modeling easier from the start\n\n## Phased Roadmap\n\n### Phase 1: Foundation\n- Initialize Go module with Bubble Tea, Lipgloss, Bubbles\n- Establish project structure and dev-log conventions\n- Document architecture decisions for UI modeling\n\n### Phase 2: UI Abstractions\n- Design abstraction layer for complex TUI composition\n- Model: views, panels, focus management, layout\n- Consider: view stack, modal overlays, split layouts\n\n### Phase 3: Input System\n- Implement leader key (SPC) handling\n- vim/spacemacs-style keybind parsing\n- Keybind registry with command mapping\n\n### Phase 4: Keybind Hints / Help\n- Transient help view triggered after SPC\n- Context-aware hints (what's available in current mode/view)\n- Dismiss on next key or timeout\n\n### Phase 5: Agent Workflow Integration\n- Agent context management (plans, state)\n- Integration points for agent execution\n- Progress event stream\n\n### Phase 6: Live Progress Windows\n- Real-time output display for agent work\n- Scrollback, filtering, search\n- Integration with abort capability\n\n### Phase 7: Abort \u0026 Control\n- Cancel signal propagation\n- Graceful shutdown of in-flight operations\n- User confirmation for destructive aborts\n\n## Dependencies\n\nPhase 1 → Phase 2 → Phase 3 → Phase 4 (foundation and input)\nPhase 2 → Phase 5 → Phase 6 → Phase 7 (agent workflow stack)\n\n## Open Questions\n\n- Which Charm libraries beyond bubbletea, lipgloss, bubbles?\n- Integration targets: Cursor, Claude Code, custom agents?\n- Persistence: where do plans/context live?","status":"closed","priority":2,"issue_type":"epic","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-06T10:11:34.602042-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-06T15:46:54.981985-05:00","closed_at":"2026-02-06T15:46:54.981985-05:00","close_reason":"Closed","labels":["project:devdeploy"]}
{"id":"devdeploy-i1u.1","title":"Phase 1: Initialize Go + Bubble Tea foundation","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-06T10:11:36.551847-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-06T10:17:50.18937-05:00","closed_at":"2026-02-06T10:17:50.18937-05:00","close_reason":"Go module with Bubble Tea, Lipgloss, Bubbles; basic TUI; dev-log architecture doc","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-i1u.1","depends_on_id":"devdeploy-i1u","type":"parent-child","created_at":"2026-02-06T10:11:36.552724-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-i1u.10","title":"Validate: Agent progress visible, abort stops execution","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-06T10:11:43.428316-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-06T15:09:50.361974-05:00","closed_at":"2026-02-06T15:09:50.361974-05:00","close_reason":"Added automated tests (TestAgentProgressVisible, TestAgentAbort_CallsCancelOnEsc, TestEmitAfter_RespectsContextCancellation) and validation checklist doc","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-i1u.10","depends_on_id":"devdeploy-i1u","type":"parent-child","created_at":"2026-02-06T10:11:43.42908-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-i1u.10","depends_on_id":"devdeploy-i1u.7","type":"blocks","created_at":"2026-02-06T10:11:45.28704-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-i1u.11","title":"Context-aware keybind hints (filter SPC p by mode)","description":"Filter LeaderHints by AppMode: show SPC p c/d only on Dashboard, SPC p a/r only on Project detail. Per keybind-help-view dev-log.","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-06T14:02:14.429598-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-06T14:10:45.530788-05:00","closed_at":"2026-02-06T14:10:45.530788-05:00","close_reason":"Implemented mode filtering in LeaderHints; SPC p c/d show on Dashboard, SPC p a/r on Project detail","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-i1u.11","depends_on_id":"devdeploy-i1u","type":"parent-child","created_at":"2026-02-06T14:02:14.431358-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-i1u.11","depends_on_id":"devdeploy-i1u.4","type":"blocks","created_at":"2026-02-06T14:02:14.433519-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-i1u.11","depends_on_id":"devdeploy-i1u.5","type":"blocks","created_at":"2026-02-06T14:05:53.610026-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-i1u.12","title":"Delete project confirmation modal","description":"Add confirmation before SPC p d deletes a project. Per Phase 7 'user confirmation for destructive aborts' principle. Show project name, require explicit confirm (y/Enter) or cancel (Esc).","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-06T14:02:16.173141-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-06T14:20:30.683107-05:00","closed_at":"2026-02-06T14:20:30.683107-05:00","close_reason":"Added DeleteProjectConfirmModal; SPC p d shows confirmation (y/Enter to confirm, Esc to cancel) before delete","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-i1u.12","depends_on_id":"devdeploy-i1u","type":"parent-child","created_at":"2026-02-06T14:02:16.174482-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-i1u.12","depends_on_id":"devdeploy-i1u.5","type":"blocks","created_at":"2026-02-06T14:02:16.176133-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-i1u.13","title":"Dashboard: populate PR and artifact counts","description":"Replace TODO placeholders in loadProjectsCmd: PRCount (Phase 6+ integration) and Artifacts count (plan.md, design.md presence). Per ui-abstraction-options project layout.","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-06T14:02:16.713152-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-06T14:26:42.44656-05:00","closed_at":"2026-02-06T14:26:42.44656-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-i1u.13","depends_on_id":"devdeploy-i1u","type":"parent-child","created_at":"2026-02-06T14:02:16.714261-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-i1u.13","depends_on_id":"devdeploy-i1u.5","type":"blocks","created_at":"2026-02-06T14:02:16.716257-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-i1u.14","title":"Add tests for project, artifact, progress packages","description":"Add unit tests for internal/project, internal/artifact, internal/progress. Critical paths: project CRUD, artifact loading, progress event emission.","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-06T14:02:17.21035-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-06T14:27:47.153459-05:00","closed_at":"2026-02-06T14:27:47.153459-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-i1u.14","depends_on_id":"devdeploy-i1u","type":"parent-child","created_at":"2026-02-06T14:02:17.210967-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-i1u.14","depends_on_id":"devdeploy-i1u.5","type":"blocks","created_at":"2026-02-06T14:02:17.212156-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-i1u.15","title":"Add dev-log README index of entries","description":"Update dev-log/README.md to list and link all dev-log entries for discoverability.","status":"closed","priority":2,"issue_type":"chore","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-06T14:02:17.674361-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-06T14:22:13.454882-05:00","closed_at":"2026-02-06T14:22:13.454882-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-i1u.15","depends_on_id":"devdeploy-i1u","type":"parent-child","created_at":"2026-02-06T14:02:17.675493-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-i1u.16","title":"Validate: Project management keybinds (SPC p) work","description":"Manual validation: SPC p c (create), p d (delete), p a (add repo), p r (remove repo) execute correctly in Dashboard vs Project detail. Per dev-log/2026-02-06-project-management-keybinds.md.","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-06T14:02:20.061302-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-06T14:07:34.100944-05:00","closed_at":"2026-02-06T14:07:34.100944-05:00","close_reason":"Added automated tests for project keybind message handlers; created manual validation checklist","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-i1u.16","depends_on_id":"devdeploy-i1u","type":"parent-child","created_at":"2026-02-06T14:02:20.061941-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-i1u.16","depends_on_id":"devdeploy-i1u.5","type":"blocks","created_at":"2026-02-06T14:02:20.062815-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-i1u.17","title":"Fix first-level leader hint: SPC p should show 'Project' not 'Delete project'","description":"The first-level leader hint after SPC incorrectly shows 'p: Delete project'. In reality, p is a submenu for all project-related keybinds (SPC p c create, p d delete, p a add repo, p r remove repo). LeaderHints currently picks one sub-action description arbitrarily when multiple bindings share the same first key. Fix: when a first-level key has sub-bindings (HasPrefix), show a generic label like 'Project' or 'Project actions' instead of a specific sub-action. Per dev-log/2026-02-06-keybind-help-view.md.","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-06T14:16:42.224697-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-06T14:19:10.74876-05:00","closed_at":"2026-02-06T14:19:10.74876-05:00","close_reason":"LeaderHints now shows generic label (Project) for first-level keys with sub-bindings instead of arbitrary sub-action description","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-i1u.17","depends_on_id":"devdeploy-i1u","type":"parent-child","created_at":"2026-02-06T14:16:42.228686-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-i1u.17","depends_on_id":"devdeploy-i1u.4","type":"blocks","created_at":"2026-02-06T14:16:42.234791-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-i1u.2","title":"Phase 2: Design UI abstractions for complex TUI modeling","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-06T10:11:36.691993-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-06T10:35:30.494325-05:00","closed_at":"2026-02-06T10:35:30.494325-05:00","close_reason":"Implemented View, Panel, Layout, FocusManager, ViewStack, Overlay; prototyped Dashboard + ProjectDetail (Option E)","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-i1u.2","depends_on_id":"devdeploy-i1u","type":"parent-child","created_at":"2026-02-06T10:11:36.692548-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-i1u.2","depends_on_id":"devdeploy-i1u.1","type":"blocks","created_at":"2026-02-06T10:11:40.726935-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-i1u.3","title":"Phase 3: Implement leader key (SPC) and vim/spacemacs keybinds","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-06T10:11:36.827269-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-06T10:41:30.103205-05:00","closed_at":"2026-02-06T10:41:30.103205-05:00","close_reason":"Implemented leader key (SPC), keybind registry, vim/spacemacs keybinds","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-i1u.3","depends_on_id":"devdeploy-i1u","type":"parent-child","created_at":"2026-02-06T10:11:36.828063-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-i1u.3","depends_on_id":"devdeploy-i1u.2","type":"blocks","created_at":"2026-02-06T10:11:40.863607-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-i1u.4","title":"Phase 4: Build keybind hints / help view (post-SPC)","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-06T10:11:36.953569-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-06T10:43:55.415527-05:00","closed_at":"2026-02-06T10:43:55.415527-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-i1u.4","depends_on_id":"devdeploy-i1u","type":"parent-child","created_at":"2026-02-06T10:11:36.954206-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-i1u.4","depends_on_id":"devdeploy-i1u.3","type":"blocks","created_at":"2026-02-06T10:11:40.992446-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-i1u.5","title":"Phase 5: Agent workflow integration (context, plans)","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-06T10:11:37.097385-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-06T10:50:21.770212-05:00","closed_at":"2026-02-06T10:50:21.770212-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-i1u.5","depends_on_id":"devdeploy-i1u","type":"parent-child","created_at":"2026-02-06T10:11:37.098037-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-i1u.5","depends_on_id":"devdeploy-i1u.2","type":"blocks","created_at":"2026-02-06T10:11:41.130859-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-i1u.5.1","title":"5.1: Artifact store and project context","description":"Load plan.md, design.md from ~/.devdeploy/projects/\u003cname\u003e/. Wire ProjectDetailView to real artifact content.","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-06T10:45:36.049486-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-06T10:50:21.763222-05:00","closed_at":"2026-02-06T10:50:21.763222-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-i1u.5.1","depends_on_id":"devdeploy-i1u.5","type":"parent-child","created_at":"2026-02-06T10:45:36.053408-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-i1u.5.2","title":"5.2: Progress event stream (contract)","description":"Define ProgressEvent type and emission mechanism. Stub for Phase 6 integration.","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-06T10:45:36.619609-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-06T10:50:21.76528-05:00","closed_at":"2026-02-06T10:50:21.76528-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-i1u.5.2","depends_on_id":"devdeploy-i1u.5","type":"parent-child","created_at":"2026-02-06T10:45:36.620207-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-i1u.5.3","title":"5.4: Wire artifact store into app model","description":"Add ArtifactStore/ProjectContext to AppModel. Views consume from model.","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-06T10:45:37.110096-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-06T10:50:21.766794-05:00","closed_at":"2026-02-06T10:50:21.766794-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-i1u.5.3","depends_on_id":"devdeploy-i1u.5","type":"parent-child","created_at":"2026-02-06T10:45:37.110948-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-i1u.5.3","depends_on_id":"devdeploy-i1u.5.1","type":"blocks","created_at":"2026-02-06T10:45:43.322836-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-i1u.5.4","title":"5.3: Agent execution integration point","description":"AgentRunner interface, SPC a a keybind, stub that emits progress. Pass project context.","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-06T10:45:37.610242-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-06T10:50:21.7684-05:00","closed_at":"2026-02-06T10:50:21.7684-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-i1u.5.4","depends_on_id":"devdeploy-i1u.5","type":"parent-child","created_at":"2026-02-06T10:45:37.611355-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-i1u.5.4","depends_on_id":"devdeploy-i1u.5.2","type":"blocks","created_at":"2026-02-06T10:45:43.435611-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-i1u.5.4","depends_on_id":"devdeploy-i1u.5.3","type":"blocks","created_at":"2026-02-06T10:45:43.556159-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-i1u.6","title":"Phase 6: Live progress windows for agent output","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-06T10:11:37.204696-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-06T14:29:09.906015-05:00","closed_at":"2026-02-06T14:29:09.906015-05:00","close_reason":"Live progress window overlay with viewport scrollback; StubRunner emits event stream; wired into app","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-i1u.6","depends_on_id":"devdeploy-i1u","type":"parent-child","created_at":"2026-02-06T10:11:37.205286-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-i1u.6","depends_on_id":"devdeploy-i1u.5","type":"blocks","created_at":"2026-02-06T10:11:41.253658-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-i1u.7","title":"Phase 7: Abort/cancel capability for in-flight operations","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-06T10:11:37.307393-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-06T14:31:52.449888-05:00","closed_at":"2026-02-06T14:31:52.449888-05:00","close_reason":"Implemented abort/cancel: cancellable context, StubRunner respects ctx, Esc triggers abort, StatusAborted","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-i1u.7","depends_on_id":"devdeploy-i1u","type":"parent-child","created_at":"2026-02-06T10:11:37.308119-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-i1u.7","depends_on_id":"devdeploy-i1u.6","type":"blocks","created_at":"2026-02-06T10:11:41.381974-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-i1u.8","title":"Validate: Go module builds, Bubble Tea renders basic TUI","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-06T10:11:43.152787-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-06T10:21:47.872166-05:00","closed_at":"2026-02-06T10:21:47.872166-05:00","close_reason":"Go module builds; Bubble Tea TUI implemented and renders in cmd/devdeploy","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-i1u.8","depends_on_id":"devdeploy-i1u","type":"parent-child","created_at":"2026-02-06T10:11:43.154149-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-i1u.8","depends_on_id":"devdeploy-i1u.1","type":"blocks","created_at":"2026-02-06T10:11:45.058123-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-i1u.9","title":"Validate: SPC shows keybind hints, commands execute","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-06T10:11:43.289824-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-06T14:09:25.295825-05:00","closed_at":"2026-02-06T14:09:25.295825-05:00","close_reason":"Added TestSPCShowsKeybindHints and TestSPCKeybindCommandsExecute; updated validation checklist","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-i1u.9","depends_on_id":"devdeploy-i1u","type":"parent-child","created_at":"2026-02-06T10:11:43.291155-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-i1u.9","depends_on_id":"devdeploy-i1u.4","type":"blocks","created_at":"2026-02-06T10:11:45.171054-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-ida","title":"Remove --label flag and label filtering from ralph CLI","description":"The --project flag was removed in devdeploy-o10, but the general --label flag and associated filtering logic remain. Complete the removal:\n\n- Remove --label flag from cmd/ralph/main.go\n- Remove Labels field from config structs in ralph\n- Remove label filtering logic from picker.go (lines passing --label to bd commands)\n- Remove Labels from LoopConfig and related code in loop.go\n- Update/remove tests in picker_test.go related to label filtering\n\nNote: ListForRepo/ListForPR in internal/beads/beads.go use project labels for UI display - evaluate if these should also be removed.","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-09T14:38:49.095994-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-09T14:42:38.676162-05:00","closed_at":"2026-02-09T14:42:38.676162-05:00","close_reason":"Closed"}
{"id":"devdeploy-j4n","title":"Automated agent loop (Ralph): git-silent rule injection + canned agent launch","description":"# Automated Agent Loop (Ralph)\n\n**Date**: 2026-02-08\n**Status**: proposed\n\n## Context\n\nThe agent launch (`SPC s a`) currently opens a bare agent shell. To enable automated development loops, we want a \"ralph\" action that launches an agent with a canned prompt: \"Look at open work, pick one, and implement it.\" For this to work, every worktree needs the beads rule and dev-log rule injected automatically, invisible to git.\n\n## Decision\n\n### 1. Git-silent rule injection\n\nWhen devdeploy creates or ensures a worktree (`AddRepo`, `EnsurePRWorktree`), it:\n1. Creates `.cursor/rules/` in the worktree with `beads.mdc` and `devdeploy.mdc` (architecture-docs rule)\n2. Creates `dev-log/` directory (empty or with a minimal README)\n3. Adds these paths to `.git/info/exclude` so git never sees them\n\n`.git/info/exclude` is the ideal mechanism: it's per-worktree, never committed, and works exactly like `.gitignore`. The injected files are ephemeral — they exist only while the worktree lives.\n\nRule content is stored as embedded Go files (`embed.FS`) in a new `internal/rules` package, making them easy to update without external dependencies.\n\n### 2. Ralph loop\n\nA new keybind `SPC s r` (\"Ralph loop\") on ModeProjectDetail:\n1. Checks the selected resource has open beads (already available via beads integration)\n2. Creates/ensures worktree (same as `SPC s a`)\n3. Ensures rules are injected (idempotent)\n4. Splits a tmux pane, runs `agent`, then sends the ralph prompt via `tmux.SendKeys`\n\nThe prompt is minimal: \"Run `bd ready` to see available work. Pick one issue, claim it with `bd update \u003cid\u003e --status in_progress`, implement it, then close it with `bd close \u003cid\u003e`. Follow the beads and dev-log rules in .cursor/rules/.\"\n\n### 3. Idempotency\n\nRule injection is idempotent — if files already exist with matching content, skip. If `.git/info/exclude` already has the entries, skip. This means `SPC s r` can be pressed repeatedly without duplication.\n\n## Consequences\n\n- Worktrees become agent-ready automatically — no manual setup\n- Zero git noise: `.git/info/exclude` is invisible to `git status`, `git diff`, etc.\n- Dev-log entries created by agents stay local until explicitly committed\n- Ralph loop is the simplest possible autonomous agent: one prompt, one resource\n- Future: could chain ralph loops across resources, add progress tracking, or add review gates","status":"closed","priority":2,"issue_type":"epic","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-08T19:12:09.084572-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-09T11:43:22.924759-05:00","closed_at":"2026-02-09T11:43:22.924759-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-j4n","depends_on_id":"devdeploy-lvr","type":"blocks","created_at":"2026-02-08T19:12:44.049035-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-j4n.1","title":"Create internal/rules package with embedded rule files","description":"Create `internal/rules/` package that uses Go `embed.FS` to carry the rule files:\n- `beads.mdc` — the beads integration rule (bd workflow, quick reference)\n- `devdeploy.mdc` — the architecture-docs rule (dev-log conventions)\n\nExpose a function like `rules.Files() map[string][]byte` that returns filename→content for injection.\n\nThese are the canonical copies; worktree injection reads from here.","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-08T19:12:16.417367-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-08T19:24:38.446147-05:00","closed_at":"2026-02-08T19:24:38.446147-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-j4n.1","depends_on_id":"devdeploy-j4n","type":"parent-child","created_at":"2026-02-08T19:12:16.418197-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-j4n.2","title":"Implement git-silent worktree injection in project.Manager","description":"After worktree creation in `AddRepo` and `EnsurePRWorktree`:\n\n1. Call a new function (e.g. `injectWorktreeRules(worktreePath)`) that:\n   a. Creates `.cursor/rules/` dir in the worktree\n   b. Writes each rule file from `internal/rules` into it\n   c. Creates `dev-log/` directory (with minimal .gitkeep or empty)\n   d. Appends `.cursor/` and `dev-log/` to `.git/info/exclude` (only if not already present)\n\n2. Idempotent: skip writes if file content matches, skip exclude entries if already present.\n\n3. `.git/info/exclude` is per-worktree and never committed — perfect for this use case.\n\nDepends on: internal/rules package (task 1).","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-08T19:12:21.765804-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-08T19:35:12.899052-05:00","closed_at":"2026-02-08T19:35:12.899052-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-j4n.2","depends_on_id":"devdeploy-j4n","type":"parent-child","created_at":"2026-02-08T19:12:21.766779-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-j4n.2","depends_on_id":"devdeploy-j4n.1","type":"blocks","created_at":"2026-02-08T19:12:39.646435-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-j4n.3","title":"Add ralph loop keybind and prompt (SPC s r)","description":"Add a new action `LaunchRalphMsg` triggered by `SPC s r` in ModeProjectDetail:\n\n1. Get selected resource; verify it has open beads (Beads field non-empty with at least one open/in_progress). Show status error if no open beads.\n2. Ensure worktree exists (same as LaunchAgentMsg).\n3. Ensure rules are injected (call injection function — idempotent).\n4. Split tmux pane in workDir, run `agent`.\n5. Send ralph prompt via `tmux.SendKeys`:\n\n   \"Run bd ready to see available work. Pick one issue, claim it with bd update \u003cid\u003e --status in_progress, implement it, then close it with bd close \u003cid\u003e. Follow the rules in .cursor/rules/.\"\n\n6. Register pane as PaneAgent in session tracker.\n\nDepends on: worktree injection (task 2).","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-08T19:12:26.919973-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-08T20:14:05.440089-05:00","closed_at":"2026-02-08T20:14:05.440089-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-j4n.3","depends_on_id":"devdeploy-j4n","type":"parent-child","created_at":"2026-02-08T19:12:26.920892-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-j4n.3","depends_on_id":"devdeploy-j4n.2","type":"blocks","created_at":"2026-02-08T19:12:39.741355-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-j4n.4","title":"Tests for rule injection and ralph loop","description":"Add tests:\n\n1. `internal/rules/` — verify embedded files load correctly, expected filenames present\n2. `internal/project/` — test `injectWorktreeRules`:\n   - Creates .cursor/rules/ with expected files\n   - Creates dev-log/ directory\n   - Appends to .git/info/exclude\n   - Idempotent on second call (no duplicate exclude entries)\n3. `internal/ui/` — test LaunchRalphMsg:\n   - Rejected when no resource selected\n   - Rejected when resource has no open beads\n   - Accepted when resource has open beads (mock tmux)\n\nDepends on: ralph keybind (task 3).","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-08T19:12:31.377877-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-09T11:43:22.00819-05:00","closed_at":"2026-02-09T11:43:22.008192-05:00","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-j4n.4","depends_on_id":"devdeploy-j4n","type":"parent-child","created_at":"2026-02-08T19:12:31.378885-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-j4n.4","depends_on_id":"devdeploy-j4n.3","type":"blocks","created_at":"2026-02-08T19:12:39.836967-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-j4n.5","title":"Update dev-log docs for ralph loop and rule injection","description":"Update dev-log documentation:\n\n1. `agent-workflow.md` — Add section on Ralph loop: what it is, how it works, the prompt template\n2. `architecture.md` — Add Phase 10 (or next phase) for automated agent loop\n3. `keybinds.md` — Add `SPC s r` Ralph loop keybind\n\nAlso update `AGENTS.md` to mention ralph loop availability.","status":"closed","priority":3,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-08T19:12:34.93278-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-09T11:43:22.486254-05:00","closed_at":"2026-02-09T11:43:22.486255-05:00","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-j4n.5","depends_on_id":"devdeploy-j4n","type":"parent-child","created_at":"2026-02-08T19:12:34.933951-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-j4n.5","depends_on_id":"devdeploy-j4n.4","type":"blocks","created_at":"2026-02-08T19:12:39.932244-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-j4n.6","title":"Support --force flag for ralph agent launch to bypass open-beads check","description":"When launching a ralph agent via SPC s r, the app currently requires the selected resource to have open beads. Add a --force mechanism (e.g. a keybind variant or a confirmation prompt) so that ralph can be launched even when no open beads exist for the resource. This is useful when the agent should discover or create its own work.","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-08T20:54:20.622116-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-08T20:58:08.086616-05:00","closed_at":"2026-02-08T20:58:08.086616-05:00","close_reason":"Misunderstood requirement, replacing with correct bead","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-j4n.6","depends_on_id":"devdeploy-j4n","type":"parent-child","created_at":"2026-02-08T20:54:20.62316-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-j4n.7","title":"Pass --force flag to agent command in ralph loop","description":"The ralph loop currently launches the agent with just `agent '\u003cprompt\u003e'`. Add the `--force` flag so the command becomes `agent --force '\u003cprompt\u003e'`. This prevents the agent from asking permission for every tool call, enabling a fully autonomous loop.","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-08T20:58:12.955186-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-08T21:50:47.175582-05:00","closed_at":"2026-02-08T21:50:47.175582-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-j4n.7","depends_on_id":"devdeploy-j4n","type":"parent-child","created_at":"2026-02-08T20:58:12.956345-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-lvr","title":"Remove artifacts, add beads integration per resource","description":"# Remove Artifacts, Add Beads Integration Per Resource\n\n**Date**: 2026-02-07\n**Status**: proposed\n\n## Context\n\nplan.md and design.md are vestigial artifacts from an earlier agent-orchestrator vision. They're passive files on disk — no way to create, edit, view, or feed them to agents from within devdeploy. The agent model shifted to \"just open a shell and run agent,\" making the artifact pipeline a dead end.\n\nMeanwhile, the project uses beads (bd) for issue tracking, and there's no integration between devdeploy's resource model and the issue tracker. Resources (repos, PRs) would benefit from showing associated beads directly in the UI.\n\n## Decision\n\n1. **Kill the artifact system** — Remove plan.md/design.md support entirely: artifact.Store, CountArtifacts, ProjectDetailView artifact section, dashboard artifact count, and all references in dev-log docs.\n\n2. **Add beads integration** — Each resource (repo or PR) can have beads attached. devdeploy queries bd to find beads matching a resource and displays them inline in the project detail view.\n\n## Beads ↔ Resource Scoping\n\nBeads are naturally scoped to repos (each repo has its own .beads/ directory). devdeploy runs `bd list` inside a repo's worktree to get that repo's beads. Two additional scoping dimensions via labels:\n\n- **Project scoping**: label `project:\u003cproject-name\u003e` — only beads with this label show under the project. Without it, a bead won't appear even though it's in the repo.\n- **PR scoping**: label `pr:\u003cnumber\u003e` — beads with this label show under the specific PR resource. Beads with only a project label (no pr: label) show under the repo resource.\n\n### Query logic per resource:\n- **Repo resource**: `bd list --label project:\u003cproject\u003e --json` run in repo worktree, excluding beads that have any `pr:*` label (those belong to PR resources)\n- **PR resource**: `bd list --label project:\u003cproject\u003e --label pr:\u003cnumber\u003e --json` run in repo worktree\n\nThis keeps beads opt-in per project (no noise from unrelated work in the same repo) and allows fine-grained PR-level tracking.\n\n## UI Changes\n\n**Project detail view** — Replace the \"Artifacts\" section with beads per resource:\n```\n← my-project\n\nResources\n▸ devdeploy/              ● 2 shells\n    devdeploy-abc  Fix the thing\n    devdeploy-def  Add feature X  [in_progress]\n  #42 Add dark mode (open)   ● 1 agent\n    devdeploy-ghi  Review PR feedback\n```\n\n**Dashboard** — Replace artifact count with bead count per project.\n\n## Consequences\n\n- Simpler codebase: ~200 LOC removed (artifact package, store tests, UI artifact rendering)\n- Beads integration is orthogonal: reads from bd, composes with existing resource model\n- No new dependencies — bd is already in the project's toolchain\n- Project label = opt-in scoping, PR label = fine-grained isolation\n- Future: could add keybinds to open/close beads from within devdeploy","status":"closed","priority":2,"issue_type":"epic","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-08T17:35:27.656311-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-08T19:21:13.407742-05:00","closed_at":"2026-02-08T19:21:13.407742-05:00","close_reason":"Closed","labels":["project:devdeploy"]}
{"id":"devdeploy-lvr.1","title":"Remove artifact system (plan.md / design.md)","description":"Remove all plan.md / design.md support:\n\n**Code to remove/modify:**\n- `internal/artifact/` — Delete entire package (store.go, store_test.go)\n- `internal/project/project.go` — Remove `artifactFiles` var, `CountArtifacts` method\n- `internal/ui/projectdetail.go` — Remove PlanContent, DesignContent fields; remove Artifacts section from View()\n- `internal/ui/app.go` — Remove ArtifactStore field from AppModel, remove artifact loading in newProjectDetailView, remove artifact.Store import\n- `internal/ui/dashboard.go` — Remove Artifacts field from ProjectSummary, remove artifact count from dashboard rendering\n- `internal/ui/app.go` — Remove CountArtifacts call in loadProjectsCmd\n- `internal/ui/app_test.go` — Remove/update any tests referencing artifacts\n- `dev-log/ui.md` — Remove \"Project Directory Layout\" artifact references, \"Artifacts\" section\n- `dev-log/agent-workflow.md` — Remove \"Artifact Store\" section\n- `dev-log/architecture.md` — No artifact references to remove (already clean)\n\n**Verification:**\n- `go build ./...` succeeds\n- `go test ./...` passes\n- No remaining references to plan.md, design.md, artifact, CountArtifacts","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-08T17:35:38.1991-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-08T18:45:11.526493-05:00","closed_at":"2026-02-08T18:45:11.526493-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-lvr.1","depends_on_id":"devdeploy-lvr","type":"parent-child","created_at":"2026-02-08T17:35:38.200524-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-lvr.2","title":"Add internal/beads package: query beads by label","description":"Create internal/beads package that shells out to bd to query issues.\n\n**Interface:**\n```go\npackage beads\n\ntype Bead struct {\n    ID       string\n    Title    string\n    Status   string // \"open\", \"closed\", \"in_progress\"\n    Priority int\n    Labels   []string\n}\n\n// ListForRepo runs `bd list --label project:\u003cproject\u003e --json` in the given\n// worktree directory. Returns beads scoped to this project, excluding any\n// with a pr:\u003cn\u003e label (those belong to PR resources).\nfunc ListForRepo(worktreeDir, projectName string) []Bead\n\n// ListForPR runs `bd list --label project:\u003cproject\u003e --label pr:\u003cnumber\u003e --json`\n// in the given worktree directory.\nfunc ListForPR(worktreeDir, projectName string, prNumber int) []Bead\n```\n\n**Implementation:**\n- Shell out to `bd list` with appropriate --label flags and --json\n- Run bd in the repo's worktree dir so it finds that repo's .beads/ db\n- Parse JSON output into []Bead\n- Graceful degradation: if bd is not installed or errors, return nil\n- Filter to open/in_progress by default (closed beads are noise)\n- For ListForRepo: post-filter to exclude beads that have any `pr:*` label\n\n**Tests:**\n- Unit test with mock bd output (or test with --no-db mode)\n- Test graceful handling when bd is not available","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-08T17:35:47.459011-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-08T18:49:04.219984-05:00","closed_at":"2026-02-08T18:49:04.219984-05:00","close_reason":"Closed","labels":["project:devdeploy","project:testproject"],"dependencies":[{"issue_id":"devdeploy-lvr.2","depends_on_id":"devdeploy-lvr","type":"parent-child","created_at":"2026-02-08T17:35:47.460225-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-lvr.2","depends_on_id":"devdeploy-lvr.1","type":"blocks","created_at":"2026-02-08T17:35:47.461302-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-lvr.3","title":"Extend Resource model with Beads field","description":"Add a Beads field to the Resource struct so beads can be displayed per resource.\n\n**Changes to project/resource.go:**\n```go\ntype Resource struct {\n    Kind         ResourceKind\n    RepoName     string\n    PR           *PRInfo\n    WorktreePath string\n    Panes        []PaneInfo\n    Beads        []BeadInfo // NEW: beads associated with this resource\n}\n\ntype BeadInfo struct {\n    ID     string\n    Title  string\n    Status string\n}\n```\n\n**Population logic (in app.go or helper):**\n- For each repo resource with a worktree: call beads.ListForRepo(worktreePath, projectName)\n- For each PR resource with a worktree: call beads.ListForPR(worktreePath, projectName, prNumber)\n- Resources without worktrees get no beads (can't query bd without a working directory)\n\n**Query optimization:**\n- One bd call per repo resource, one per PR resource (only those with worktrees)\n- Cache per project entry (don't re-query on every keypress)","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-08T17:35:56.359145-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-08T18:56:49.848903-05:00","closed_at":"2026-02-08T18:56:49.848903-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-lvr.3","depends_on_id":"devdeploy-lvr","type":"parent-child","created_at":"2026-02-08T17:35:56.36054-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-lvr.3","depends_on_id":"devdeploy-lvr.2","type":"blocks","created_at":"2026-02-08T17:35:56.362007-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-lvr.4","title":"Show beads per resource in ProjectDetailView","description":"Update ProjectDetailView.View() to render beads under each resource.\n\n**UI layout:**\n```\n← my-project\n\nResources\n▸ devdeploy/                    ● 2 shells\n    devdeploy-abc  Fix the thing\n    devdeploy-def  Add feature X  [in_progress]\n  #42 Add dark mode (open)      ● 1 agent\n    devdeploy-ghi  Review feedback\n```\n\n**Rendering rules:**\n- Beads indented under their resource (same indent as PR lines under repos)\n- Format: `\u003cid\u003e  \u003ctitle\u003e` — truncate title to fit terminal width\n- Status indicator only for non-open statuses (in_progress gets a tag, open is default/implicit)\n- Dimmed style (similar to current PR style) to not overwhelm the resource list\n- If a resource has no beads, show nothing (no \"no beads\" placeholder)\n\n**Also update dashboard:**\n- Replace Artifacts count with Beads count in ProjectSummary\n- Show total open bead count per project","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-08T17:36:04.983967-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-08T19:02:27.984786-05:00","closed_at":"2026-02-08T19:02:27.984786-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-lvr.4","depends_on_id":"devdeploy-lvr","type":"parent-child","created_at":"2026-02-08T17:36:04.984594-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-lvr.4","depends_on_id":"devdeploy-lvr.3","type":"blocks","created_at":"2026-02-08T17:36:04.985432-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-lvr.5","title":"Update dev-log docs for artifact removal and beads integration","description":"Update architecture docs to reflect the change:\n\n- dev-log/ui.md: Remove artifact references from Project Directory Layout and Artifacts section. Add Beads section describing the label-based integration.\n- dev-log/agent-workflow.md: Remove Artifact Store subsection (Phase 5). Note that artifacts were removed in favor of beads integration.\n- dev-log/architecture.md: Update Phase 9 description if it mentions artifacts. Add beads integration to the core concept.\n- dev-log/README.md: No changes needed (no artifact-specific entry).","status":"closed","priority":3,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-08T17:36:11.631174-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-08T19:16:01.305263-05:00","closed_at":"2026-02-08T19:16:01.305263-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-lvr.5","depends_on_id":"devdeploy-lvr","type":"parent-child","created_at":"2026-02-08T17:36:11.632407-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-lvr.5","depends_on_id":"devdeploy-lvr.4","type":"blocks","created_at":"2026-02-08T17:36:11.633323-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-lvr.6","title":"Validation: build, tests, end-to-end beads display","description":"Validate the full change end-to-end:\n\n1. go build ./... succeeds\n2. go test ./... passes\n3. No references to plan.md, design.md, artifact.Store, CountArtifacts remain\n4. Create a project, add a repo\n5. Label a bead: bd label add \u003cid\u003e project:\u003cproject-name\u003e\n6. Open project detail — bead appears under the repo resource\n7. Label a bead for a PR: bd label add \u003cid\u003e pr:\u003cnumber\u003e\n8. Bead moves from repo to PR resource in the view\n9. Dashboard shows bead count instead of artifact count\n10. bd not installed → graceful degradation (no beads shown, no crash)","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-08T17:36:17.894411-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-08T19:21:13.306501-05:00","closed_at":"2026-02-08T19:21:13.306501-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-lvr.6","depends_on_id":"devdeploy-lvr","type":"parent-child","created_at":"2026-02-08T17:36:17.895044-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-lvr.6","depends_on_id":"devdeploy-lvr.4","type":"blocks","created_at":"2026-02-08T17:36:17.895965-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-lvr.6","depends_on_id":"devdeploy-lvr.5","type":"blocks","created_at":"2026-02-08T17:36:17.896679-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-nh2","title":"Project detail view progressive loading","description":"# Project Detail View Progressive Loading\n\n**Context**: Opening a project detail view is slow (~2-5s) because it synchronously loads:\n1. PRs via `gh pr list` (2 calls per repo, sequential)\n2. Beads via `bd list` (1+ call per resource, sequential)\n\n**Goal**: Make project detail view load instantly with progressive data enrichment.\n\n## Approach\nFollow the dashboard's existing progressive loading pattern:\n- Phase 1: instant filesystem data (repos only)\n- Phase 2: async PR fetching (parallel across repos)\n- Phase 3: async bead fetching (parallel across resources)\n\n## Success Criteria\n- Project detail view renders in \u003c100ms\n- PRs and beads appear as they load with visual loading indicators\n- No blocking UI on slow network/disk operations","status":"closed","priority":1,"issue_type":"epic","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-09T13:04:36.785249-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-09T13:23:43.866335-05:00","closed_at":"2026-02-09T13:23:43.866335-05:00","close_reason":"Closed","labels":["project:devdeploy"]}
{"id":"devdeploy-nh2.1","title":"Phase 1: Instant repo loading in project detail view","description":"Split `newProjectDetailView` into instant + async phases.\n\n## Changes\n\n1. Create `ListProjectReposOnly(projectName)` that returns just repo resources (filesystem scan, no gh calls)\n2. Modify `newProjectDetailView` to:\n   - Set `v.Resources` to repo-only resources (instant)\n   - Return the view immediately\n   - Return a tea.Cmd that triggers async enrichment\n\n3. Add loading state to ProjectDetailView:\n   - `loading bool` flag\n   - Show \"...\" or spinner for PR/bead counts while loading\n\n## Expected Result\n- Project detail opens instantly showing repos\n- PRs show as loading until enriched","status":"closed","priority":1,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-09T13:04:45.026116-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-09T13:26:06.048499-05:00","closed_at":"2026-02-09T13:26:06.048499-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-nh2.1","depends_on_id":"devdeploy-nh2","type":"parent-child","created_at":"2026-02-09T13:04:45.027111-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-nh2.2","title":"Phase 2: Async parallel PR fetching for project detail","description":"Fetch PRs in background with parallel requests across repos.\n\n## Changes\n\n1. Create `loadProjectPRsCmd(m *project.Manager, projectName string) tea.Cmd`\n   - Runs `ListProjectPRs` in goroutine\n   - Returns `ProjectPRsLoadedMsg{ProjectName, PRsByRepo}`\n\n2. Parallelize `ListProjectPRs`:\n   - Spawn goroutine per repo\n   - Fetch open + merged PRs concurrently within each repo\n   - Collect results via channel\n\n3. Handle `ProjectPRsLoadedMsg` in AppModel.Update:\n   - Merge PR resources into existing repo resources\n   - Rebuild items list\n   - Clear loading state for PRs\n\n## Rationale\nSimilar to how `enrichesProjectsCmd` parallelizes across projects for dashboard.","status":"closed","priority":1,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-09T13:04:49.098778-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-09T13:26:56.852643-05:00","closed_at":"2026-02-09T13:26:56.852643-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-nh2.2","depends_on_id":"devdeploy-nh2","type":"parent-child","created_at":"2026-02-09T13:04:49.099831-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-nh2.3","title":"Phase 3: Async parallel bead fetching for project detail","description":"Fetch beads in background with parallel requests across resources.\n\n## Changes\n\n1. Create `loadResourceBeadsCmd(projectName string, resources []project.Resource) tea.Cmd`\n   - Spawns goroutines for each resource with a worktree\n   - Calls `beads.ListForRepo` / `beads.ListForPR` in parallel\n   - Returns `ResourceBeadsLoadedMsg{ProjectName, BeadsByResource}`\n\n2. Handle `ResourceBeadsLoadedMsg` in AppModel.Update:\n   - Attach beads to matching resources in Detail view\n   - Rebuild items list\n   - Clear loading state for beads\n\n3. Trigger after PRs loaded (beads need PR resources to exist)\n\n## Rationale\nBeads require worktree paths; most resources already have them.\nRun after PR loading so PR resources are available.","status":"closed","priority":1,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-09T13:04:52.402814-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-09T13:27:31.202927-05:00","closed_at":"2026-02-09T13:27:31.202927-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-nh2.3","depends_on_id":"devdeploy-nh2","type":"parent-child","created_at":"2026-02-09T13:04:52.403744-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-nh2.4","title":"Add loading indicators to project detail view","description":"Visual feedback while async data loads.\n\n## Changes\n\n1. Add loading state fields to ProjectDetailView:\n   - `prsLoading bool`\n   - `beadsLoading bool`\n\n2. Update View() rendering:\n   - Show spinner or \"...\" next to PRs section while prsLoading\n   - Show \"...\" for bead counts while beadsLoading\n   - Match dashboard's loading indicator style\n\n3. State transitions:\n   - Set loading=true when entering view\n   - Clear prsLoading when ProjectPRsLoadedMsg received\n   - Clear beadsLoading when ResourceBeadsLoadedMsg received\n\n## Visual\n```\n← my-project\n\nResources\n▸ devdeploy/              ● 2 shells\n    devdeploy-abc  ...\n  PRs loading...\n```","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-09T13:04:55.901617-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-09T13:28:44.850503-05:00","closed_at":"2026-02-09T13:28:44.850503-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-nh2.4","depends_on_id":"devdeploy-nh2","type":"parent-child","created_at":"2026-02-09T13:04:55.902559-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-nh2.5","title":"Optional: Cache PR data to reduce gh API calls","description":"Optional optimization: cache gh pr list results to avoid redundant API calls.\n\n## Context\nWhen navigating between dashboard and project detail, or switching projects, \nPR data is re-fetched even if it was just loaded. This adds latency and \nrate-limits against GitHub API.\n\n## Potential Approaches\n\n1. **In-memory TTL cache**: Store PR results with 30-60s TTL\n   - Simple Map with timestamp\n   - Cleared on manual refresh (SPC r)\n   \n2. **Stale-while-revalidate**: Show cached data immediately, refresh in background\n\n3. **Project-level cache invalidation**: Cache per project, invalidate on:\n   - Manual refresh\n   - Worktree creation/deletion\n   - PR merge/close detection\n\n## Trade-offs\n- More complexity\n- Stale data risk (user might miss new PRs)\n- Memory usage\n\n## Recommendation\nImplement only if progressive loading (tasks 1-4) isn't sufficient.\nMark as P3 - nice to have.","status":"closed","priority":3,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-09T13:05:06.013195-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-09T13:38:45.600867-05:00","closed_at":"2026-02-09T13:38:45.600867-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-nh2.5","depends_on_id":"devdeploy-nh2","type":"parent-child","created_at":"2026-02-09T13:05:06.014044-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-nq9","title":"Ralph Loop UX Improvements","status":"closed","priority":2,"issue_type":"epic","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-09T12:32:44.997126-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-09T12:40:12.378898-05:00","closed_at":"2026-02-09T12:40:12.378898-05:00","close_reason":"Closed","labels":["devdeploy","project:devdeploy"]}
{"id":"devdeploy-nq9.1","title":"Single bead targeting: add --bead flag to ralph CLI","description":"**Problem**: When cursor is on a specific bead and user presses `SPC s r`, the ralph binary ignores the selection and runs `bd ready` to pick work. The agent fallback path correctly uses `SelectedBead()` for targeted prompts, but ralph binary doesn't support this.\n\n**Solution**:\n1. Add `--bead \u003cid\u003e` flag to `cmd/ralph/main.go`\n2. When `--bead` is set:\n   - Skip the picker entirely\n   - Fetch prompt data for that specific bead\n   - Set `--max-iterations 1` implicitly (one bead = one iteration)\n3. Update `internal/ui/app.go` LaunchRalphMsg handler:\n   - Check `a.Detail.SelectedBead()`\n   - If non-nil, pass `--bead \u003cid\u003e` to ralph command\n\n**Acceptance**:\n- `ralph --workdir /path --bead devdeploy-abc` runs exactly one iteration for that bead\n- `SPC s r` with cursor on a bead passes `--bead` flag\n- `SPC s r` with cursor on resource header (no bead selected) runs normal picker mode","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-09T12:32:56.359336-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-09T12:40:11.958899-05:00","closed_at":"2026-02-09T12:40:11.958899-05:00","close_reason":"Closed","labels":["devdeploy","project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-nq9.1","depends_on_id":"devdeploy-nq9","type":"parent-child","created_at":"2026-02-09T12:32:56.361781-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-nq9.2","title":"Simple log parser for human-readable ralph output","description":"**Problem**: Ralph runs `agent --output-format stream-json` which outputs a wall of JSON. Hard to tell at a glance that work is happening.\n\n**Solution**: Add a simple log formatter in `internal/ralph/logfmt.go` that:\n1. Wraps the stdout writer in the executor\n2. Parses each JSON line and extracts key events\n3. Emits short, human-readable lines like:\n   - `[tool] Read: src/main.go`\n   - `[tool] Write: src/utils.go (42 lines)`\n   - `[tool] Shell: go test ./...`\n   - `[edit] StrReplace: src/main.go`\n   - `[think] Planning approach...` (truncated)\n\nKeep it minimal:\n- Only show tool invocations and major events\n- One line per tool call max\n- Truncate long content\n- Pass through raw JSON in `--verbose` mode\n\n**Acceptance**:\n- Running ralph shows clear progress indicators\n- Each tool call = one short line\n- Full JSON still available with `--verbose`","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-09T12:33:01.803364-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-09T12:40:11.959689-05:00","closed_at":"2026-02-09T12:40:11.959689-05:00","close_reason":"Closed","labels":["devdeploy","project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-nq9.2","depends_on_id":"devdeploy-nq9","type":"parent-child","created_at":"2026-02-09T12:33:01.804392-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-nq9.3","title":"Landing check: verify commit and bead closure after each iteration","description":"**Problem**: Sometimes agent iterations don't properly commit changes or close beads. Work gets done but isn't \"landed\" - unclear if iteration succeeded.\n\n**Solution**: Add a landing check after agent execution in `internal/ralph/loop.go`:\n\n1. After agent returns, before calling Assess:\n   - Run `git status --porcelain` to check for uncommitted changes\n   - Run `git log -1 --format=%H` before and after to detect new commits\n   - Check if `bd show \u003cid\u003e` status is \"closed\"\n\n2. If landing incomplete:\n   - Log warning: \"Agent finished but didn't land: uncommitted changes / bead still open\"\n   - Optionally: attempt recovery (run commit + close commands)\n   - Mark iteration outcome appropriately (partial success vs failure)\n\n3. Add `--strict-landing` flag (default true):\n   - When true: treat incomplete landing as failure\n   - When false: warn but count as success if bead closed\n\n**Acceptance**:\n- Clear log output showing landing status after each iteration\n- Uncommitted changes are detected and reported\n- Unclosed beads are detected and reported\n- Iteration summary includes landing status","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-09T12:33:07.994333-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-09T12:40:11.960306-05:00","closed_at":"2026-02-09T12:40:11.960306-05:00","close_reason":"Closed","labels":["devdeploy","project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-nq9.3","depends_on_id":"devdeploy-nq9","type":"parent-child","created_at":"2026-02-09T12:33:07.995298-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-nq9.4","title":"Remove live ralph status polling from devdeploy UI","description":"**Problem**: devdeploy polls `.ralph-status.json` and shows a RalphStatusView overlay. But:\n- Ralph output is already visible in the tmux pane\n- The status box takes UI space\n- Polling adds complexity\n- User wants devdeploy to stay interactive for multitasking\n\n**Solution**:\n1. Remove `startRalphStatusPolling()` call from LaunchRalphMsg handler\n2. Remove or comment out `RalphStatusView` rendering in app view\n3. Keep `.ralph-status.json` writing (useful for CI/scripting)\n4. devdeploy remains fully interactive after launching ralph\n\n**Optional enhancement**:\n- Add `SPC s f` keybind to focus (join-pane) the ralph tmux pane\n- Status bar could show \"ralph running\" without a full overlay\n\n**Acceptance**:\n- `SPC s r` launches ralph but devdeploy stays interactive immediately\n- No status overlay blocking the UI\n- User can navigate projects, view beads, etc. while ralph runs\n- Ralph pane visible in tmux split","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-09T12:33:13.222043-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-09T12:40:11.960902-05:00","closed_at":"2026-02-09T12:40:11.960902-05:00","close_reason":"Closed","labels":["devdeploy","project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-nq9.4","depends_on_id":"devdeploy-nq9","type":"parent-child","created_at":"2026-02-09T12:33:13.223087-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-o10","title":"Remove project: label filtering from bd CLI","description":"The project: label filtering is always getting in the way. Remove this feature completely - it adds friction without clear benefit.","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-09T12:36:18.047701-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-09T12:41:14.381517-05:00","closed_at":"2026-02-09T12:41:14.381517-05:00","close_reason":"Closed","labels":["project:devdeploy"]}
{"id":"devdeploy-pif","title":"Replace os.Setenv with t.Setenv in tests","description":"13 tests across app_test.go, artifact/store_test.go, and project/project_test.go use os.Setenv + defer os.Unsetenv for DEVDEPLOY_PROJECTS_DIR. On Go 1.25.1, t.Setenv is available, auto-restores after test, and prevents accidental parallel test flakiness. Straightforward find-and-replace.","status":"closed","priority":3,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-07T16:31:38.286824-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-07T19:47:37.650569-05:00","closed_at":"2026-02-07T19:47:37.650569-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-pif","depends_on_id":"devdeploy-e4o","type":"blocks","created_at":"2026-02-07T16:31:56.416791-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-rfx","title":"Add / keybind to search/filter lines in resource view","description":"Pressing / should activate a search mode that allows quickly filtering and jumping to lines in the resource view, similar to vim-style search.","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-09T09:54:54.47114-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-09T12:18:44.511833-05:00","closed_at":"2026-02-09T12:18:44.511833-05:00","close_reason":"Closed","labels":["project:devdeploy"]}
{"id":"devdeploy-rjw","title":"Resource view should use full available window width","description":"The resource view width is limited regardless of the available terminal/window size. It should expand to use all available horizontal space.","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-09T09:54:52.372088-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-09T10:28:57.451965-05:00","closed_at":"2026-02-09T10:28:57.451965-05:00","close_reason":"Closed","labels":["project:devdeploy"]}
{"id":"devdeploy-us7","title":"Tests pollute tmux session: split panes and spawn agents","description":"Running `go test ./...` (or any test suite) while inside tmux causes tmux tests in internal/tmux/tmux_test.go to actually split panes and spawn agents in the user's live tmux session. Tests like TestSplitPane_KillPane, TestSendKeys, TestBreakPane_JoinPane, and TestEnsureLayout all call real tmux commands that create visible panes. The TMUX env check (`t.Skip` when TMUX is empty) is backwards — it skips when NOT in tmux, meaning it always runs when the user is in tmux. Fix options: (1) Run tmux tests in an isolated tmux server (e.g. `tmux -L test-socket new-session -d`), (2) gate tests behind a dedicated env var like DEVDEPLOY_TMUX_TESTS=1 so they don't run by default, or (3) mock the tmux client in tests. The app_test.go UI tests that trigger SPC s s / SPC a a may also call real tmux.SplitPane — ensure those use stubs.","status":"closed","priority":1,"issue_type":"bug","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-08T22:09:11.520177-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-09T11:54:26.868561-05:00","closed_at":"2026-02-09T11:54:26.868561-05:00","close_reason":"Closed","labels":["project:devdeploy"]}
{"id":"devdeploy-vmr","title":"Add DashboardView navigation and rendering tests","description":"ProjectDetailView has thorough j/k/g/G and View() tests in projectdetail_test.go. DashboardView has identical navigation logic but zero dedicated tests. Add one table-driven test covering up/down bounds and basic rendering. Low priority since the logic mirrors already-tested code.","status":"closed","priority":4,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-07T16:31:51.558872-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-07T20:54:22.418814-05:00","closed_at":"2026-02-07T20:54:22.418814-05:00","close_reason":"Closed","labels":["project:devdeploy"]}
{"id":"devdeploy-vpk","title":"Epic: UI Polish and Bubbles Standardization","description":"Parent epic for UI polish work including project list spacing, indentation, native list filtering, and bubbles library standardization.","status":"closed","priority":2,"issue_type":"epic","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-09T12:26:49.052829-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-09T12:38:30.692256-05:00","closed_at":"2026-02-09T12:38:30.692256-05:00","close_reason":"Closed","labels":["project:devdeploy"]}
{"id":"devdeploy-vpk.1","title":"Reduce project list spacing in dashboard","description":"The dashboard project list has too much vertical spacing between items.\n\n## Problem\nThe bubbles list.DefaultDelegate has default spacing of 1 line between items, creating excessive whitespace.\n\n## Solution\nAdd `delegate.SetSpacing(0)` when creating the delegate in `NewDashboardView()`.\n\n## Files\n- internal/ui/dashboard.go","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-09T12:26:55.138941-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-09T12:38:28.590745-05:00","closed_at":"2026-02-09T12:38:28.590745-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-vpk.1","depends_on_id":"devdeploy-vpk","type":"parent-child","created_at":"2026-02-09T12:26:55.13993-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-vpk.2","title":"Fix project list indentation in dashboard","description":"The project list items are not indented, making the visual hierarchy unclear.\n\n## Problem\nProject items render at the left margin without indentation.\n\n## Solution\nAdd left padding/margin to the list or adjust the delegate rendering to include indentation prefix.\n\n## Files\n- internal/ui/dashboard.go\n- internal/ui/styles.go (if adding new style)","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-09T12:26:57.508829-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-09T12:38:28.591565-05:00","closed_at":"2026-02-09T12:38:28.591565-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-vpk.2","depends_on_id":"devdeploy-vpk","type":"parent-child","created_at":"2026-02-09T12:26:57.509934-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-vpk.3","title":"Migrate ProjectDetailView to native bubbles list with filtering","description":"Replace custom viewport-based rendering with native bubbles list component to get built-in `/` filtering.\n\n## Problem\nCurrent implementation uses a viewport with custom rendering. The `/` search navigates to matches but doesn't filter (hide non-matching items). Users expect filter behavior.\n\n## Solution\nFlatten the hierarchical view into a flat bubbles list:\n- Each resource (repo, PR) is a list item\n- Each bead is a list item with visual indentation in title text\n- Enable list filtering (`SetFilteringEnabled(true)`)\n- Use visual prefixes to show hierarchy (e.g. indent beads, use icons for repos vs PRs vs beads)\n\n## Visual hierarchy in flat list\n```\n▸ devdeploy/                    ● 2 shells\n    devdeploy-abc  Fix thing\n    devdeploy-def  Add feature  [in_progress]\n▸ #42 Add dark mode             ● 1 agent  \n      devdeploy-ghi  Review PR\n```\n\nBecomes flat items with visual indicators:\n```\n◆ devdeploy/                    ● 2 shells\n  ○ devdeploy-abc  Fix thing\n  ○ devdeploy-def  Add feature  [in_progress]\n◇ #42 Add dark mode             ● 1 agent\n    ○ devdeploy-ghi  Review PR\n```\n\n## Changes needed\n1. Define item types (ResourceItem, BeadItem) implementing list.Item and list.DefaultItem\n2. Replace viewport with list.Model\n3. Update Update() to use list navigation\n4. Flatten Resources+Beads into single item slice\n5. Handle Enter/actions based on selected item type\n6. Remove custom search implementation (use native filter)\n\n## Files\n- internal/ui/projectdetail.go (major rewrite)\n- internal/ui/styles.go (delegate styles)","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-09T12:27:05.82238-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-09T12:38:28.592186-05:00","closed_at":"2026-02-09T12:38:28.592186-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-vpk.3","depends_on_id":"devdeploy-vpk","type":"parent-child","created_at":"2026-02-09T12:27:05.82328-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-vpk.4","title":"Create shared list delegate factory with consistent styles","description":"Standardize bubbles list delegate creation across the codebase.\n\n## Problem\nMultiple places create list.NewDefaultDelegate() and configure styles separately:\n- dashboard.go\n- modal_repo_picker.go\n- (soon) projectdetail.go\n\n## Solution\nCreate a factory function in styles.go:\n```go\n// NewCompactListDelegate returns a delegate with zero spacing and shared styles.\nfunc NewCompactListDelegate() list.DefaultDelegate {\n    d := list.NewDefaultDelegate()\n    d.SetSpacing(0)\n    d.ShowDescription = false\n    d.Styles.SelectedTitle = Styles.Selected\n    d.Styles.NormalTitle = Styles.Muted\n    // etc.\n    return d\n}\n```\n\nThen update all list usages to use this factory.\n\n## Files\n- internal/ui/styles.go (add factory)\n- internal/ui/dashboard.go (use factory)\n- internal/ui/modal_repo_picker.go (use factory)\n- internal/ui/projectdetail.go (use factory)","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-09T12:27:10.440858-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-09T12:38:28.592776-05:00","closed_at":"2026-02-09T12:38:28.592776-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-vpk.4","depends_on_id":"devdeploy-vpk","type":"parent-child","created_at":"2026-02-09T12:27:10.441997-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-vpk.5","title":"Enable filtering in repo picker modal","description":"Enable native bubbles list filtering in the repo picker modal for better UX with large workspace repo lists.\n\n## Problem\nIn modal_repo_picker.go, filtering is disabled:\n```go\nl.SetFilteringEnabled(false)\n```\n\nFor workspaces with many repos, scrolling through the list is tedious.\n\n## Solution\nEnable filtering and let users type to filter repos:\n```go\nl.SetFilteringEnabled(true)\n```\n\nThe `/` key will activate filter mode, or we can set it to filter immediately on typing.\n\n## Files\n- internal/ui/modal_repo_picker.go","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-09T12:27:19.194353-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-09T12:38:28.593371-05:00","closed_at":"2026-02-09T12:38:28.593371-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-vpk.5","depends_on_id":"devdeploy-vpk","type":"parent-child","created_at":"2026-02-09T12:27:19.195256-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-w5a","title":"Epic-aware Ralph: orchestrate leaf tasks then verify with opus","status":"closed","priority":2,"issue_type":"epic","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-09T13:13:43.012021-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-09T13:33:07.702437-05:00","closed_at":"2026-02-09T13:33:07.702437-05:00","close_reason":"Closed","labels":["project:devdeploy"]}
{"id":"devdeploy-w5a.1","title":"Detect epic bead selection in LaunchRalphMsg handler","description":"When cursor is on a bead with IssueType=='epic', branch to new epic-aware flow instead of single-bead prompt.","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-09T13:13:49.053146-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-09T13:33:46.864414-05:00","closed_at":"2026-02-09T13:33:46.864414-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-w5a.1","depends_on_id":"devdeploy-w5a","type":"parent-child","created_at":"2026-02-09T13:13:49.054055-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-w5a.2","title":"Add BeadInfo.IssueType to project.Resource model","description":"Ensure IssueType is populated when loading beads so we can detect epics. Currently mapped from beads.Bead.IssueType in app.go but may need to verify it's available on SelectedBead().","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-09T13:13:54.484471-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-09T13:34:26.809252-05:00","closed_at":"2026-02-09T13:34:26.809252-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-w5a.2","depends_on_id":"devdeploy-w5a","type":"parent-child","created_at":"2026-02-09T13:13:54.485571-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-w5a.3","title":"Implement epic orchestrator that runs leaf tasks sequentially","description":"When launching Ralph on an epic: (1) query 'bd ready --parent \u003cepic-id\u003e' to get leaf tasks, (2) launch agent on first leaf, (3) after completion, launch next leaf until all done. Track state in ralph process or via tmux pane lifecycle.","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-09T13:14:00.092455-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-09T13:35:12.347763-05:00","closed_at":"2026-02-09T13:35:12.347763-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-w5a.3","depends_on_id":"devdeploy-w5a","type":"parent-child","created_at":"2026-02-09T13:14:00.093334-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-w5a.4","title":"Add opus verification pass after all leaf tasks complete","description":"After all leaf tasks under an epic are closed, launch a final agent session with opus thinking model. Prompt: verify the epic is fully implemented by reviewing closed tasks and code changes, then create follow-up beads for any gaps or improvements.","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-09T13:14:05.601122-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-09T13:35:54.376672-05:00","closed_at":"2026-02-09T13:35:54.376672-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-w5a.4","depends_on_id":"devdeploy-w5a","type":"parent-child","created_at":"2026-02-09T13:14:05.601963-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-w5a.5","title":"Update ralph binary to support --epic flag for sequential leaf processing","description":"Extend ralph CLI to accept --epic flag. When set, ralph enters epic mode: picks leaf tasks one at a time via 'bd ready --parent \u003cepic\u003e', processes each to completion, then runs verification pass. This keeps orchestration in ralph rather than devdeploy UI.","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-09T13:14:11.29526-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-09T13:36:35.184374-05:00","closed_at":"2026-02-09T13:36:35.184374-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-w5a.5","depends_on_id":"devdeploy-w5a","type":"parent-child","created_at":"2026-02-09T13:14:11.296164-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-w5a.6","title":"Add tests for epic-aware Ralph flow","description":"Test cases: (1) SPC s r on epic triggers epic mode, (2) leaf tasks run in priority order, (3) opus verification runs after all leaves complete, (4) fallback to agent CLI if ralph binary missing.","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-09T13:14:16.516181-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-09T13:37:53.551103-05:00","closed_at":"2026-02-09T13:37:53.551103-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-w5a.6","depends_on_id":"devdeploy-w5a","type":"parent-child","created_at":"2026-02-09T13:14:16.517115-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-w6o","title":"Migrate internal/tmux to gotmux library","description":"# Migrate tmux orchestration from exec.Command to gotmux\n\n**Date**: 2026-02-08\n**Status**: proposed\n\n## Context\n\nThe `internal/tmux` package currently shells out to the `tmux` CLI via `exec.Command` for all tmux operations (split-window, kill-pane, send-keys, break-pane, join-pane, list-panes, display-message). This is fragile — it requires manual stdout/stderr buffer wiring, string parsing of tmux format variables, and offers no type safety on tmux entities.\n\n[gotmux](https://github.com/GianlucaP106/gotmux) is a Go library that provides a clean, type-safe API for programmatic tmux interaction: sessions, windows, panes, server info, and client connections. It wraps the same tmux CLI under the hood but exposes proper Go types and error handling.\n\n## Decision\n\nReplace the hand-rolled `internal/tmux` package with gotmux. The migration touches:\n\n1. **`internal/tmux/tmux.go`** — All 8 exported functions (`WindowPaneCount`, `EnsureLayout`, `SplitPane`, `KillPane`, `SendKeys`, `BreakPane`, `JoinPane`, `ListPaneIDs`) become thin wrappers around gotmux calls or are replaced entirely.\n2. **`cmd/devdeploy/main.go`** — Calls `tmux.EnsureLayout()`.\n3. **`internal/ui/app.go`** — Calls `tmux.SplitPane`, `tmux.SendKeys`, `tmux.KillPane`, `tmux.BreakPane`, `tmux.JoinPane`.\n4. **`internal/session/tracker.go`** — Uses `tmux.ListPaneIDs` for liveness checks.\n5. **`internal/tmux/tmux_test.go`** — Tests for all the above.\n\n## Consequences\n\n- **Type safety**: Pane, Window, Session become proper Go structs instead of string IDs.\n- **Less boilerplate**: No manual `exec.Command` + buffer wiring + string parsing.\n- **Maintained dependency**: gotmux is actively maintained and MIT-licensed.\n- **API surface may change**: gotmux's pane/window model may require small adjustments to how we pass pane references through the session tracker.","status":"closed","priority":2,"issue_type":"epic","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-08T19:17:46.858178-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-09T11:45:43.430238-05:00","closed_at":"2026-02-09T11:45:43.430238-05:00","close_reason":"Closed","labels":["project:devdeploy"]}
{"id":"devdeploy-w6o.1","title":"Add gotmux dependency to go.mod","description":"Add `github.com/GianlucaP106/gotmux` to go.mod via `go get`. Verify it compiles. No functional changes yet.","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-08T19:17:51.491728-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-08T20:22:03.960589-05:00","closed_at":"2026-02-08T20:22:03.960589-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-w6o.1","depends_on_id":"devdeploy-w6o","type":"parent-child","created_at":"2026-02-08T19:17:51.492901-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-w6o.2","title":"Rewrite internal/tmux package to use gotmux API","description":"Rewrite `internal/tmux/tmux.go` to use gotmux instead of raw exec.Command calls. Replace all 8 exported functions:\n\n- `WindowPaneCount` → use gotmux window/pane listing\n- `EnsureLayout` → use gotmux split + select-pane\n- `SplitPane` → use gotmux pane.Split with working directory\n- `KillPane` → use gotmux pane kill\n- `SendKeys` → use gotmux pane.SendKeys\n- `BreakPane` → use gotmux break-pane equivalent\n- `JoinPane` → use gotmux join-pane equivalent\n- `ListPaneIDs` → use gotmux list-panes\n\nKeep the same exported function signatures where possible to minimize caller changes. Where gotmux returns richer types (e.g., *gotmux.Pane instead of string pane ID), decide whether to adapt the API or wrap it.","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-08T19:17:59.125869-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-08T20:27:56.654022-05:00","closed_at":"2026-02-08T20:27:56.654022-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-w6o.2","depends_on_id":"devdeploy-w6o","type":"parent-child","created_at":"2026-02-08T19:17:59.127029-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-w6o.2","depends_on_id":"devdeploy-w6o.1","type":"blocks","created_at":"2026-02-08T19:17:59.128025-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-w6o.3","title":"Update callers in app.go, main.go, and session tracker","description":"Update callers of the internal/tmux package to work with the new gotmux-based API:\n\n- `cmd/devdeploy/main.go` — calls `tmux.EnsureLayout()`\n- `internal/ui/app.go` — calls SplitPane, SendKeys, KillPane, BreakPane, JoinPane\n- `internal/session/tracker.go` — uses `tmux.ListPaneIDs` as LivenessChecker\n\nIf the rewritten tmux package preserves the same signatures, this may be a no-op. If the API now returns gotmux types (e.g., *gotmux.Pane), update TrackedPane and callers accordingly.","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-08T19:18:05.723326-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-08T20:30:39.445065-05:00","closed_at":"2026-02-08T20:30:39.445065-05:00","close_reason":"Closed","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-w6o.3","depends_on_id":"devdeploy-w6o","type":"parent-child","created_at":"2026-02-08T19:18:05.72445-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-w6o.3","depends_on_id":"devdeploy-w6o.2","type":"blocks","created_at":"2026-02-08T19:18:05.725542-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-w6o.4","title":"Update tmux tests for gotmux-based implementation","description":"Update `internal/tmux/tmux_test.go` to cover the gotmux-based implementation. Existing tests (TestSplitPane_KillPane, TestSendKeys, TestSplitPane_InvalidDir, TestBreakPane_JoinPane, TestWindowPaneCount, TestEnsureLayout) should still pass with the same semantics. Add any new tests needed for gotmux-specific behavior (e.g., initialization of the gotmux client).","status":"closed","priority":2,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-08T19:18:11.543502-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-09T11:45:42.362562-05:00","closed_at":"2026-02-09T11:45:42.362563-05:00","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-w6o.4","depends_on_id":"devdeploy-w6o","type":"parent-child","created_at":"2026-02-08T19:18:11.544308-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-w6o.4","depends_on_id":"devdeploy-w6o.2","type":"blocks","created_at":"2026-02-08T19:18:11.545331-05:00","created_by":"Patrick Oyarzun"}]}
{"id":"devdeploy-w6o.5","title":"Validation: build, tests, and end-to-end tmux operations","description":"Build, run tests, and manual end-to-end validation inside tmux. Confirm: pane splitting, send-keys, break/join, liveness pruning, and EnsureLayout all work correctly with the gotmux-backed implementation.","status":"closed","priority":3,"issue_type":"task","owner":"patrick.oyarzun@grafana.com","created_at":"2026-02-08T19:18:16.496587-05:00","created_by":"Patrick Oyarzun","updated_at":"2026-02-09T11:45:42.954965-05:00","closed_at":"2026-02-09T11:45:42.954966-05:00","labels":["project:devdeploy"],"dependencies":[{"issue_id":"devdeploy-w6o.5","depends_on_id":"devdeploy-w6o","type":"parent-child","created_at":"2026-02-08T19:18:16.49746-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-w6o.5","depends_on_id":"devdeploy-w6o.3","type":"blocks","created_at":"2026-02-08T19:18:16.498511-05:00","created_by":"Patrick Oyarzun"},{"issue_id":"devdeploy-w6o.5","depends_on_id":"devdeploy-w6o.4","type":"blocks","created_at":"2026-02-08T19:18:16.499282-05:00","created_by":"Patrick Oyarzun"}]}
